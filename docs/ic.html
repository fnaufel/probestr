<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 12 Intervalos de confiança | Probabilidade e Estatística com R</title>
<meta name="author" content="Fernando Náufel">
<meta name="description" content="12.1 Vídeo 1    12.2 Intervalos de confiança para a proporção  12.2.1 Exemplo: quem posta no FB diariamente?  Teoria Uma pesquisa com uma amostra aleatória de \(156\) jovens descobriu que \(48\)...">
<meta name="generator" content="bookdown 0.36 with bs4_book()">
<meta property="og:title" content="Capítulo 12 Intervalos de confiança | Probabilidade e Estatística com R">
<meta property="og:type" content="book">
<meta property="og:image" content="/images/640px-Nightingale-mortality.jpg">
<meta property="og:description" content="12.1 Vídeo 1    12.2 Intervalos de confiança para a proporção  12.2.1 Exemplo: quem posta no FB diariamente?  Teoria Uma pesquisa com uma amostra aleatória de \(156\) jovens descobriu que \(48\)...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 12 Intervalos de confiança | Probabilidade e Estatística com R">
<meta name="twitter:description" content="12.1 Vídeo 1    12.2 Intervalos de confiança para a proporção  12.2.1 Exemplo: quem posta no FB diariamente?  Teoria Uma pesquisa com uma amostra aleatória de \(156\) jovens descobriu que \(48\)...">
<meta name="twitter:image" content="/images/640px-Nightingale-mortality.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lexend-0.4.7/font.css" rel="stylesheet">
<link href="libs/JetBrains_Mono-0.4.7/font.css" rel="stylesheet">
<link href="libs/Roboto-0.4.7/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="html_files/alterar_detalhes.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="html_files/styles_all.css">
<link rel="stylesheet" href="html_files/styles_book.css">
<link rel="stylesheet" href="html_files/webex.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Ir para conteúdo principal</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Probabilidade e Estatística com R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Mostrar sumário</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Buscar" aria-label="Buscar">
</form>

      <nav aria-label="Conteúdo"><h2>Conteúdo</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Apresentação</a></li>
<li><a class="" href="oque.html"><span class="header-section-number">1</span> O que é estatística?</a></li>
<li><a class="" href="rintro.html"><span class="header-section-number">2</span> Introdução a R</a></li>
<li><a class="" href="introdu%C3%A7%C3%A3o-ao-tidyverse.html"><span class="header-section-number">3</span> Introdução ao tidyverse</a></li>
<li><a class="" href="viz.html"><span class="header-section-number">4</span> Visualização com ggplot2</a></li>
<li><a class="" href="viz2.html"><span class="header-section-number">5</span> Visualização com ggplot2 (continuação)</a></li>
<li><a class="" href="medidas.html"><span class="header-section-number">6</span> Medidas</a></li>
<li><a class="" href="probs.html"><span class="header-section-number">7</span> Probabilidades</a></li>
<li><a class="" href="variaveis.html"><span class="header-section-number">8</span> Variáveis aleatórias</a></li>
<li><a class="" href="discretas.html"><span class="header-section-number">9</span> Distribuições discretas</a></li>
<li><a class="" href="distribui%C3%A7%C3%B5es-cont%C3%ADnuas.html"><span class="header-section-number">10</span> Distribuições contínuas</a></li>
<li><a class="" href="tcl.html"><span class="header-section-number">11</span> Teorema central do limite</a></li>
<li><a class="active" href="ic.html"><span class="header-section-number">12</span> Intervalos de confiança</a></li>
<li><a class="" href="th.html"><span class="header-section-number">13</span> Testes de hipóteses</a></li>
<li><a class="" href="refer%C3%AAncias.html">Referências</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/fnaufel/probestr">Ver código-fonte do livro <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="ic" class="section level1" number="12">
<h1>
<span class="header-section-number">Capítulo 12</span> Intervalos de confiança<a class="anchor" aria-label="anchor" href="#ic"><i class="fas fa-link"></i></a>
</h1>
<div id="vídeo-1-6" class="section level2" number="12.1">
<h2>
<span class="header-section-number">12.1</span> Vídeo 1<a class="anchor" aria-label="anchor" href="#v%C3%ADdeo-1-6"><i class="fas fa-link"></i></a>
</h2>
<iframe src="https://www.youtube.com/embed/sXayNPy8hLg" width="100%" height="400px" data-external="1" class="center" style="width: 80%;">
</iframe>
</div>
<div id="intervalos-de-confiança-para-a-proporção" class="section level2" number="12.2">
<h2>
<span class="header-section-number">12.2</span> Intervalos de confiança para a proporção<a class="anchor" aria-label="anchor" href="#intervalos-de-confian%C3%A7a-para-a-propor%C3%A7%C3%A3o"><i class="fas fa-link"></i></a>
</h2>
<div id="exemplo-quem-posta-no-fb-diariamente" class="section level3" number="12.2.1">
<h3>
<span class="header-section-number">12.2.1</span> Exemplo: quem posta no FB diariamente?<a class="anchor" aria-label="anchor" href="#exemplo-quem-posta-no-fb-diariamente"><i class="fas fa-link"></i></a>
</h3>
<div id="teoria" class="section level4 unnumbered">
<h4>Teoria<a class="anchor" aria-label="anchor" href="#teoria"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p>Uma pesquisa com uma amostra aleatória de <span class="math inline">\(156\)</span> jovens descobriu que <span class="math inline">\(48\)</span> deles postam no FB todo dia.</p></li>
<li>
<p>Qual a <span class="hl">proporção amostral</span> de jovens que postam no FB diariamente?</p>
<div class="sourceCode" id="cb752"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_chapeu</span> <span class="op">&lt;-</span> <span class="fl">48</span><span class="op">/</span><span class="fl">156</span></span>
<span><span class="va">p_chapeu</span></span></code></pre></div>
<pre><code>## [1] 0,3076923</code></pre>
<p>A resposta é <span class="math inline">\(\hat p = 0{,}31\)</span>, ou <span class="math inline">\(31\%\)</span>.</p>
<p>Perceba que é costume chamar a proporção amostral de <span class="math inline">\(\hat p\)</span>.</p>
</li>
<li><p>Isto quer dizer que a proporção populacional é <span class="math inline">\(0{,}31\)</span>? Não necessariamente, mas esta parece ser uma boa estimativa.</p></li>
<li><p>Existe uma <em>margem de erro</em>. Como computá-la? Usando o TCL!</p></li>
<li>
<p>Primeiro, verificamos que as condições para usar o TCL são satisfeitas:</p>
<ul>
<li><p>De fato, <span class="math inline">\(n &gt; 30\)</span>.</p></li>
<li><p>A nossa amostra é aleatória (podemos supor).</p></li>
<li><p>Os indivíduos da amostra são independentes (podemos supor).</p></li>
<li><p>O tamanho da amostra é menos do que <span class="math inline">\(10\%\)</span> da população (podemos supor).</p></li>
<li><p>Há pelo menos <span class="math inline">\(10\)</span> sucessos e pelo menos <span class="math inline">\(10\)</span> fracassos na amostra.</p></li>
</ul>
</li>
<li><p>A proporção amostral <span class="math inline">\(\hat p\)</span> varia para cada amostra; logo, <span class="math inline">\(\hat p\)</span> é uma variável aleatória e tem uma distribuição de probabilidade: a <span class="hl">distribuição amostral da proporção.</span></p></li>
<li><p>O TCL diz que a distribuição de <span class="math inline">\(\hat p\)</span> é normal, com média <span class="math inline">\(p\)</span> (a proporção populacional verdadeira, que nós nunca vamos descobrir) e desvio-padrão <span class="math inline">\(\sqrt{\frac{p(1-p)}{n}}\)</span> (que também nunca vamos descobrir, mas que podemos estimar usando <span class="math inline">\(\hat p\)</span> no lugar de <span class="math inline">\(p\)</span>).</p></li>
<li>
<p>Vamos supor que <span class="math inline">\(\hat p \neq p\)</span>. Eis, então, as duas situações possíveis:</p>
<p><img src="_main_files/figure-html/unnamed-chunk-306-1.png" width="100%" style="display: block; margin: auto;"><img src="_main_files/figure-html/unnamed-chunk-306-2.png" width="100%" style="display: block; margin: auto;"></p>
</li>
<li>
<p>Agora, o desfecho. Preste bem atenção. Nada nas mangas.</p>
<ul>
<li>
<p>Em uma distribuição normal com média <span class="math inline">\(\mu\)</span> e desvio-padrão <span class="math inline">\(\sigma\)</span>, sabemos que <span class="math inline">\(95\%\)</span> da probabilidade está entre <span class="math inline">\(\mu - 1{,}96\sigma\)</span> e <span class="math inline">\(\mu + 1{,}96\sigma\)</span>.</p>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-307-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li>
<p>Na nossa distribuição amostral de <span class="math inline">\(\hat p\)</span>, o desvio-padrão é o erro-padrão</p>
<p><span class="math display">\[
EP = \sqrt{\frac{\hat p(1-\hat p)}{n}}
\]</span></p>
</li>
<li><p>Então, em <span class="math inline">\(95\%\)</span> das amostras possíveis, <span class="math inline">\(\hat p\)</span> vai estar a <span class="math inline">\(1{,}96\cdot EP\)</span> ou menos de distância da proporção populacional <span class="math inline">\(p\)</span>.</p></li>
<li><p>Nossa amostra é uma destas <span class="math inline">\(95\%\)</span> das amostras possíveis? Não sabemos. Na verdade, como nossa amostra foi aleatória, há <span class="math inline">\(0{,}95\)</span> de probabilidade de que sim.</p></li>
<li><p>Ou seja, <span class="hl">há <span class="math inline">\(0{,}95\)</span> de probabilidade de que nosso <span class="math inline">\(\hat p\)</span> esteja a <span class="math inline">\(1{,}96\cdot EP\)</span> ou menos de distância da proporção populacional <span class="math inline">\(p\)</span>.</span></p></li>
<li>
<p>Daí, podemos dizer, com <span class="math inline">\(95\%\)</span> de confiança, que a proporção populacional <span class="math inline">\(p\)</span> está no intervalo</p>
<p><span class="math display">\[
[\quad \hat p - 1{,}96 \cdot EP\quad,\quad \hat p + 1{,}96 \cdot EP\quad]
\quad=\quad
[\quad0{,}24
\quad,\quad
0{,}38\quad]
\]</span></p>
</li>
</ul>
</li>
<li>
<p>Eis os desenhos para as duas situações possíveis:</p>
<p><img src="_main_files/figure-html/unnamed-chunk-309-1.png" width="100%" style="display: block; margin: auto;"><img src="_main_files/figure-html/unnamed-chunk-309-2.png" width="100%" style="display: block; margin: auto;"></p>
</li>
</ul>
</div>
</div>
<div id="o-que-quer-dizer-95-de-confiança" class="section level3 unnumbered rmdcaution">
<h3>O que quer dizer <span class="math inline">\(\;95\%\)</span> de confiança?<a class="anchor" aria-label="anchor" href="#o-que-quer-dizer-95-de-confian%C3%A7a"><i class="fas fa-link"></i></a>
</h3>
<p>Quer dizer que não temos certeza de que nossa amostra está dentre aquelas cuja proporção amostral <span class="math inline">\(\hat p\)</span> está a <span class="math inline">\(1{,}96\)</span> desvios-padrão ou menos de distância da proporção populacional <span class="math inline">\(p\)</span>.</p>
<p>Existe <span class="math inline">\(0{,}05\)</span> de probabilidade de que nossa amostra tenha sido “ruim”. Neste caso, nosso intervalo de confiança está errado.</p>
<p>Ou, dito de outro modo, se repetirmos este experimento com <span class="math inline">\(100\)</span> amostras diferentes, o intervalo de confiança calculado vai conter a proporção populacional em <span class="math inline">\(95\)</span> das vezes.</p>
<p><span class="hl">É importante perceber que <span class="math inline">\(95\%\)</span> <em>não é</em> a probabilidade de <span class="math inline">\(p\)</span> estar no intervalo, pois <span class="math inline">\(p\)</span> é um valor fixo, sem qualquer incerteza, que está (probabilidade <span class="math inline">\(1\)</span>) ou não está (probabilidade <span class="math inline">\(0\)</span>) no nosso intervalo de confiança.</span></p>
</div>
<div id="simulação-2" class="section level4 unnumbered">
<h4>Simulação<a class="anchor" aria-label="anchor" href="#simula%C3%A7%C3%A3o-2"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p>Vamos simular uma população de <span class="math inline">\(200\)</span> mil valores booleanos: <code>FALSE</code> significa que a pessoa não posta no FB todo dia, <code>TRUE</code> significa que a pessoa posta no FB todo dia.</p></li>
<li>
<p>A proporção populacional <span class="math inline">\(p\)</span> que posta todo dia tem um valor específico, que não vou revelar aqui. Na vida real, você não vai saber o valor de <span class="math inline">\(p\)</span>.</p>
<div class="sourceCode" id="cb754"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">populacao</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>  <span class="fl">2e5</span>, </span>
<span>  replace <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">p</span>, <span class="va">p</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Vamos retirar uma amostra de <span class="math inline">\(156\)</span> pessoas:</p>
<div class="sourceCode" id="cb755"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">156</span></span>
<span><span class="va">amostra</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">populacao</span>, <span class="va">n</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Qual a proporção de pessoas que postam todo dia (<span class="math inline">\(\hat p\)</span>)?</p>
<div class="sourceCode" id="cb756"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_chapeu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">amostra</span><span class="op">)</span></span>
<span><span class="va">p_chapeu</span></span></code></pre></div>
<pre><code>## [1] 0,3012821</code></pre>
</li>
<li>
<p>Vamos construir um intervalo de confiança de <span class="math inline">\(95\%\)</span> para a proporção populacional <span class="math inline">\(p\)</span>:</p>
<ul>
<li>
<p>O erro-padrão é</p>
<div class="sourceCode" id="cb758"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">p_chapeu</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">p_chapeu</span><span class="op">)</span> <span class="op">/</span> <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">ep</span></span></code></pre></div>
<pre><code>## [1] 0,0367346</code></pre>
</li>
<li>
<p>Para <span class="math inline">\(95\%\)</span>, precisamos usar <span class="math inline">\(1{,}96\)</span> como o número de desvios-padrão. A margem de erro será</p>
<div class="sourceCode" id="cb760"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">margem</span> <span class="op">&lt;-</span> <span class="fl">1.96</span> <span class="op">*</span> <span class="va">ep</span></span>
<span><span class="va">margem</span></span></code></pre></div>
<pre><code>## [1] 0,07199981</code></pre>
</li>
<li>
<p>Os extremos do intervalo de confiança vão ser</p>
<div class="sourceCode" id="intervalo"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_chapeu</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="va">margem</span></span></code></pre></div>
<pre><code>## [1] 0,2292822 0,3732819</code></pre>
</li>
</ul>
</li>
<li><p>Será que este intervalo é bom? Será que a amostra que tomamos está naqueles <span class="math inline">\(95\%\)</span> de amostras que ficam próximas da proporção verdadeira? Será que a proporção verdadeira está neste intervalo?</p></li>
<li><p>Na vida real, jamais saberíamos. Eu sei, porque fui eu que gerei a população, mas não vou falar ainda.</p></li>
<li>
<p>Vamos gerar mais <span class="math inline">\(50\)</span> amostras e examinar os intervalos de confiança calculados a partir delas. Como estamos trabalhando com <span class="math inline">\(95\%\)</span> de confiança, é razoável que <span class="math inline">\(2\)</span> ou <span class="math inline">\(3\)</span> dos intervalos — i.e., <span class="math inline">\(5\%\)</span> de <span class="math inline">\(50\)</span> — não capturem a proporção real:</p>
<div class="sourceCode" id="cb763"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_amostras</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span></span>
<span><span class="co"># Gero uma lista, cada elemento uma amostra (um vetor)</span></span>
<span><span class="va">amostras</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="va">n_amostras</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">populacao</span>, <span class="va">n</span><span class="op">)</span>, simplify <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' Função para calcular o IC de uma amostra: retorna vetor de 2 elementos</span></span>
<span><span class="co">#' @param amostra Vetor booleanos</span></span>
<span><span class="co">#' @param conf Nível de confiança (default .95)</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @return Vetor numérico de 2 elementos: extremos do IC calculado</span></span>
<span><span class="co">#'</span></span>
<span><span class="va">montar_ic</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">amostra</span>, <span class="va">conf</span> <span class="op">=</span> <span class="fl">.95</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="va">p_chapeu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">amostra</span><span class="op">)</span></span>
<span>  <span class="va">ep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">p_chapeu</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">p_chapeu</span><span class="op">)</span> <span class="op">/</span> <span class="va">n</span><span class="op">)</span></span>
<span>  <span class="va">valor_critico</span> <span class="op">&lt;-</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">conf</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="va">margem</span> <span class="op">&lt;-</span> <span class="va">valor_critico</span> <span class="op">*</span> <span class="va">ep</span></span>
<span></span>
<span>  <span class="va">p_chapeu</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="va">margem</span></span>
<span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Calcular os ICs</span></span>
<span><span class="va">ICs</span> <span class="op">&lt;-</span> <span class="va">amostras</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="op">~</span><span class="fu">montar_ic</span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Em quais deles a proporção verdadeira está no IC?</span></span>
<span><span class="va">ICs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_lgl</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span><span class="op">(</span><span class="va">p</span>, <span class="va">.x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">.x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [14]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [27]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [40]  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</li>
<li><p>Verifique, no resultado acima, se a proporção verdadeira foi capturada aproximadamente <span class="math inline">\(95\%\)</span> das vezes.</p></li>
<li>
<p>Uma visualização legal dos intervalos (veja no arquivo .Rmd como fazer):</p>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-318-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p>Ah, e agora você sabe qual era o valor de <span class="math inline">\(p\)</span>. Volte e veja se <a href="ic.html#intervalo">aquele primeiro intervalo de confiança</a> era bom.</p></li>
<li><p>Pense e responda: os intervalos de confiança da figura acima têm todos o mesmo tamanho?</p></li>
</ul>
</div>
<div id="no-geral-9" class="section level3" number="12.2.2">
<h3>
<span class="header-section-number">12.2.2</span> No geral<a class="anchor" aria-label="anchor" href="#no-geral-9"><i class="fas fa-link"></i></a>
</h3>
<div id="situação" class="section level4 unnumbered">
<h4>Situação<a class="anchor" aria-label="anchor" href="#situa%C3%A7%C3%A3o"><i class="fas fa-link"></i></a>
</h4>
<div class="rmdbox">
<ul>
<li><p>Você tem uma amostra de <span class="math inline">\(n\)</span> elementos, com proporção amostral <span class="math inline">\(\hat p\)</span>.</p></li>
<li><p>Você quer construir um intervalo de confiança de <span class="math inline">\(c \%\)</span> para a proporção populacional.</p></li>
</ul>
</div>
<p>No nosso exemplo, <span class="math inline">\(n = 156\)</span>, <span class="math inline">\(\hat p = 48/156\)</span> e <span class="math inline">\(c = 0{,}95\)</span>.</p>
</div>
<div id="verificar-as-condições-para-usar-o-tcl" class="section level4 unnumbered">
<h4>Verificar as condições para usar o TCL<a class="anchor" aria-label="anchor" href="#verificar-as-condi%C3%A7%C3%B5es-para-usar-o-tcl"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p>A distribuição da população é normal e <span class="math inline">\(n \geq 10\)</span>?</p></li>
<li><p>Caso a distribuição da população não seja conhecida, <span class="math inline">\(n \geq 30\)</span>?</p></li>
<li><p>A amostra é aleatória, representativa da população?</p></li>
<li><p>Os valores da amostra são independentes entre si?</p></li>
<li><p>O tamanho da amostra é menos do que <span class="math inline">\(10\%\)</span> da população?</p></li>
<li><p>Há pelo menos <span class="math inline">\(10\)</span> fracassos e pelo menos <span class="math inline">\(10\)</span> sucessos na amostra?</p></li>
</ul>
</div>
<div id="calcular-o-erro-padrão-da-distribuição-amostral-de-hat-p" class="section level4 unnumbered">
<h4>Calcular o erro-padrão da distribuição amostral de <span class="math inline">\(\hat p\)</span><a class="anchor" aria-label="anchor" href="#calcular-o-erro-padr%C3%A3o-da-distribui%C3%A7%C3%A3o-amostral-de-hat-p"><i class="fas fa-link"></i></a>
</h4>
<p><span class="math display">\[
EP = \sqrt{\frac{\hat p (1 - \hat p)}{n}}
\]</span></p>
</div>
<div id="calcular-a-margem-de-erro" class="section level4 unnumbered">
<h4>Calcular a margem de erro<a class="anchor" aria-label="anchor" href="#calcular-a-margem-de-erro"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<p>Calcular o valor crítico <span class="math inline">\(z^\star\)</span>: o valor tal que a área abaixo da curva normal padrão entre <span class="math inline">\(-z^\star\)</span> e <span class="math inline">\(z^\star\)</span> seja de <span class="math inline">\(c\)</span></p>
<div class="sourceCode" id="cb765"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">c</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</li>
<li><p>No nosso exemplo, <code>z = -qnorm(0.025) = 1,96</code>.</p></li>
<li>
<p>A margem de erro vai ser</p>
<p><span class="math display">\[
ME = z^\star \cdot EP
\]</span></p>
</li>
</ul>
</div>
<div id="construir-o-intervalo" class="section level4 unnumbered">
<h4>Construir o intervalo<a class="anchor" aria-label="anchor" href="#construir-o-intervalo"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<p>O intervalo de confiança será</p>
<p><span class="math display">\[
[\quad \hat p - ME \quad,\quad \hat p + ME \quad]
\]</span></p>
</li>
</ul>
</div>
<div id="outros-níveis-de-confiança" class="section level4 unnumbered">
<h4>Outros níveis de confiança<a class="anchor" aria-label="anchor" href="#outros-n%C3%ADveis-de-confian%C3%A7a"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p>No exemplo, usamos <span class="math inline">\(c = 95\%\)</span>.</p></li>
<li><p>O que acontece quando <span class="math inline">\(c = 90\%\)</span>?</p></li>
<li><p>E quando <span class="math inline">\(c = 99\%\)</span>?</p></li>
<li><p>Refaça o exemplo usando estes valores. Os intervalos ficam maiores? Menores? Qual a relação entre o nível de confiança <span class="math inline">\(c\)</span> e o tamanho da margem de erro?</p></li>
<li><p>O que aconteceria se o nível de confiança fosse de <span class="math inline">\(100\%\)</span>? Nós saberíamos a proporção populacional com certeza?</p></li>
</ul>
</div>
</div>
<div id="escolhendo-o-tamanho-da-amostra" class="section level3" number="12.2.3">
<h3>
<span class="header-section-number">12.2.3</span> Escolhendo o tamanho da amostra<a class="anchor" aria-label="anchor" href="#escolhendo-o-tamanho-da-amostra"><i class="fas fa-link"></i></a>
</h3>
<div id="exemplo-8" class="section level4 unnumbered">
<h4>Exemplo<a class="anchor" aria-label="anchor" href="#exemplo-8"><i class="fas fa-link"></i></a>
</h4>
<div class="rmdbox">
<ul>
<li><p>Você quer fazer uma pesquisa para saber a proporção <span class="math inline">\(p\)</span> da população do seu estado que vai votar no candidato <span class="math inline">\(A\)</span> na próxima eleição.</p></li>
<li><p>Você quer que a margem de erro seja de <span class="math inline">\(5\)</span> pontos percentuais (i.e., <span class="math inline">\(ME = 0{,}05\)</span>), com <span class="math inline">\(95\%\)</span> de confiança.</p></li>
<li><p>Qual deve ser o tamanho <span class="math inline">\(n\)</span> da sua amostra?</p></li>
</ul>
</div>
<ul>
<li>
<p>Pelo que vimos na seção anterior</p>
<p><span class="math display">\[
ME \quad=\quad z^\star \cdot EP \quad=\quad z^\star \cdot \sqrt{\frac{\hat p (1 - \hat p)}{n}}
\]</span></p>
</li>
<li>
<p>Nós podemos isolar <span class="math inline">\(n\)</span> e chegar a (confira)</p>
<p><span class="math display">\[
n = \hat p (1-\hat p) \left(\frac{z^\star}{ME}\right)^2
\]</span></p>
</li>
<li><p>Nós temos <span class="math inline">\(ME = 0{,}05\)</span> e <span class="math inline">\(z^\star = 1{,}96\)</span> (calculado a partir do nível de confiança).</p></li>
<li><p>E <span class="math inline">\(\hat p\)</span>? Bem, o pior caso é o valor de <span class="math inline">\(\hat p\)</span> que maximiza <span class="math inline">\(n\)</span>, que é <span class="math inline">\(\hat p = 0{,}5\)</span>.</p></li>
<li><p>Com estes valores, chegamos a</p></li>
</ul>
<p><span class="math display">\[
n = 0{,}5 \cdot 0{,}5 \cdot \left(\frac{1{,}96}{0{,}05}\right)^2 = 384{,}16
\]</span></p>
<ul>
<li><p>Conclusão: precisamos de uma amostra de pelo menos <span class="math inline">\(385\)</span> pessoas.</p></li>
<li><p>Perceba que usamos o valor de pior caso para <span class="math inline">\(\hat p\)</span>. Se já tivermos uma estimativa para <span class="math inline">\(\hat p\)</span> (obtida de uma pesquisa anterior, por exemplo), podemos usar esta estimativa e obter um valor menor para <span class="math inline">\(n\)</span>.</p></li>
<li><p>Perceba, também, que o tamanho da população não entra em jogo, a não ser para verificar que a amostra é menos do que <span class="math inline">\(10\%\)</span> da população.</p></li>
<li><p>Calcule, por exemplo, qual seria o valor de <span class="math inline">\(n\)</span> se já tivéssemos uma estimativa de <span class="math inline">\(\hat p = 0{,}3\)</span>.</p></li>
</ul>
</div>
</div>
<div id="em-r-8" class="section level3" number="12.2.4">
<h3>
<span class="header-section-number">12.2.4</span> Em R<a class="anchor" aria-label="anchor" href="#em-r-8"><i class="fas fa-link"></i></a>
</h3>
<div id="usando-binom.test" class="section level4 unnumbered">
<h4>Usando <code>binom.test</code><a class="anchor" aria-label="anchor" href="#usando-binom.test"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<p>Tudo isto já é feito pelo R base, com a função <code>binom.test</code>, embora o algoritmo seja um pouco diferente, como você pode ver pelos resultados:</p>
<div class="sourceCode" id="cb766"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/binom.test.html">binom.test</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">156</span><span class="op">)</span></span>
<span><span class="va">bt</span></span></code></pre></div>
<pre><code>## 
##  Exact binomial test
## 
## data:  48 and 156
## number of successes = 48, number of trials = 156, p-value = 0,000001748
## alternative hypothesis: true probability of success is not equal to 0,5
## 95 percent confidence interval:
##  0,2363644 0,3864933
## sample estimates:
## probability of success 
##              0,3076923</code></pre>
</li>
<li><p>Esta função, além de computar o intervalo de confiança, faz um <em>teste de hipótese</em> (assunto de uma aula futura).</p></li>
<li>
<p>O valor de retorno desta função é uma lista:</p>
<div class="sourceCode" id="cb768"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">bt</span><span class="op">)</span></span></code></pre></div>
<pre><code>## List of 9
##  $ statistic  : Named num 48
##   ..- attr(*, "names")= chr "number of successes"
##  $ parameter  : Named num 156
##   ..- attr(*, "names")= chr "number of trials"
##  $ p.value    : num 0,00000175
##  $ conf.int   : num [1:2] 0,236 0,386
##   ..- attr(*, "conf.level")= num 0,95
##  $ estimate   : Named num 0,308
##   ..- attr(*, "names")= chr "probability of success"
##  $ null.value : Named num 0,5
##   ..- attr(*, "names")= chr "probability of success"
##  $ alternative: chr "two.sided"
##  $ method     : chr "Exact binomial test"
##  $ data.name  : chr "48 and 156"
##  - attr(*, "class")= chr "htest"</code></pre>
</li>
<li>
<p>Se você quiser só o intervalo de confiança:</p>
<div class="sourceCode" id="cb770"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bt</span><span class="op">$</span><span class="va">conf.int</span></span></code></pre></div>
<pre><code>## [1] 0,2363644 0,3864933
## attr(,"conf.level")
## [1] 0,95</code></pre>
</li>
</ul>
</div>
<div id="usando-o-pacote-binom" class="section level4 unnumbered">
<h4>Usando o pacote <code>binom</code><a class="anchor" aria-label="anchor" href="#usando-o-pacote-binom"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p>Na verdade, existem muitos algoritmos diferentes para construir um intervalo de confiança para a proporção. <a href="https://www.ucl.ac.uk/english-usage/staff/sean/resources/binomialpoisson.pdf">Este artigo, de 2013</a>, examina diversas alternativas.</p></li>
<li>
<p>O pacote <code>binom</code> implementa vários destes algoritmos através da função <code>binom.confint</code>:</p>
<div class="sourceCode" id="cb772"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">binom</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/binom/man/binom.confint.html">binom.confint</a></span><span class="op">(</span><span class="fl">48</span>, <span class="fl">156</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>big.mark <span class="op">=</span> <span class="st">'.'</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html">kable_paper</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'striped'</span>, <span class="st">'hover'</span><span class="op">)</span>,</span>
<span>    full_width <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<table class=" lightable-paper lightable-striped lightable-hover" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;">
<p>method</p>
</th>
<th style="text-align:right;">
<p>x</p>
</th>
<th style="text-align:right;">
<p>n</p>
</th>
<th style="text-align:right;">
<p>mean</p>
</th>
<th style="text-align:right;">
<p>lower</p>
</th>
<th style="text-align:right;">
<p>upper</p>
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>agresti-coull</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2404694</p>
</td>
<td style="text-align:right;">
<p>0,3841586</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>asymptotic</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2352664</p>
</td>
<td style="text-align:right;">
<p>0,3801182</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>bayes</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3089172</p>
</td>
<td style="text-align:right;">
<p>0,2377481</p>
</td>
<td style="text-align:right;">
<p>0,3814466</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>cloglog</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2371200</p>
</td>
<td style="text-align:right;">
<p>0,3808746</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>exact</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2363644</p>
</td>
<td style="text-align:right;">
<p>0,3864933</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>logit</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2403194</p>
</td>
<td style="text-align:right;">
<p>0,3843959</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>probit</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2393586</p>
</td>
<td style="text-align:right;">
<p>0,3834481</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>profile</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2388119</p>
</td>
<td style="text-align:right;">
<p>0,3828426</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>lrt</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2388381</p>
</td>
<td style="text-align:right;">
<p>0,3828590</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>prop.test</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2376901</p>
</td>
<td style="text-align:right;">
<p>0,3873412</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>wilson</p>
</td>
<td style="text-align:right;">
<p>48</p>
</td>
<td style="text-align:right;">
<p>156</p>
</td>
<td style="text-align:right;">
<p>0,3076923</p>
</td>
<td style="text-align:right;">
<p>0,2406146</p>
</td>
<td style="text-align:right;">
<p>0,3840134</p>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>O algoritmo que descrevemos no exemplo é o <code>asymptotic</code>.</p></li>
<li><p>O algoritmo implementado por <code>binom.test</code> é o <code>exact</code>.</p></li>
<li><p>Leia as páginas de ajuda de <code>binom.test</code> e de <code>binom.confint</code>.</p></li>
<li><p>No RStudio, use <code>Code | Go To Function Definition</code> na chamada da função <code>binom.confint</code> para ver o seu código fonte. O método <code>asymptotic</code> é implementado nas linhas <span class="math inline">\(45\)</span>–<span class="math inline">\(54\)</span>, usando variáveis definidas nas linhas <span class="math inline">\(28\)</span>–<span class="math inline">\(32\)</span>. Lendo o código, você deve ser capaz de perceber que o que está acontecendo é o mesmo que fizemos no nosso exemplo.</p></li>
</ul>
</div>
</div>
</div>
<div id="vídeo-2-5" class="section level2" number="12.3">
<h2>
<span class="header-section-number">12.3</span> Vídeo 2<a class="anchor" aria-label="anchor" href="#v%C3%ADdeo-2-5"><i class="fas fa-link"></i></a>
</h2>
<iframe src="https://www.youtube.com/embed/OomFvn5LpCc" width="100%" height="400px" data-external="1" class="center" style="width: 80%;">
</iframe>
</div>
<div id="intervalos-de-confiança-para-a-média" class="section level2" number="12.4">
<h2>
<span class="header-section-number">12.4</span> Intervalos de confiança para a média<a class="anchor" aria-label="anchor" href="#intervalos-de-confian%C3%A7a-para-a-m%C3%A9dia"><i class="fas fa-link"></i></a>
</h2>
<div id="exemplo-preço-médio-da-gasolina" class="section level3" number="12.4.1">
<h3>
<span class="header-section-number">12.4.1</span> Exemplo: preço médio da gasolina<a class="anchor" aria-label="anchor" href="#exemplo-pre%C3%A7o-m%C3%A9dio-da-gasolina"><i class="fas fa-link"></i></a>
</h3>
<div class="rmdbox">
<ul>
<li><p>Em uma amostra aleatória de <span class="math inline">\(48\)</span> postos de gasolina, a média do preço de um litro de gasolina comum foi R$ <span class="math inline">\(5{,}41\)</span>.</p></li>
<li><p>De pesquisas anteriores, sabemos que o desvio-padrão dos preços de gasolina <em>na população de todos os postos</em> é de R$ <span class="math inline">\(1{,}09\)</span>.</p></li>
<li><p>Vamos construir um intervalo de confiança de <span class="math inline">\(95\%\)</span> para a média <em>populacional</em> do preço do litro da gasolina.</p></li>
</ul>
</div>
<div id="teoria-1" class="section level4 unnumbered">
<h4>Teoria<a class="anchor" aria-label="anchor" href="#teoria-1"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<p>Vamos identificar os dados:</p>
<ul>
<li><p>Média amostral <span class="math inline">\(\overline x = 5{,}41\)</span>.</p></li>
<li><p>Tamanho da amostra <span class="math inline">\(n = 48\)</span>.</p></li>
<li><p>desvio-padrão populacional <span class="math inline">\(\sigma = 1{,}09\)</span>.</p></li>
<li><p>Nível de confiança <span class="math inline">\(c = 0{,}95\)</span>.</p></li>
</ul>
</li>
<li><p>Verifique que as condições para aplicar o TCL são satisfeitas aqui.</p></li>
<li>
<p>O TCL diz que <span class="math inline">\(\overline X\)</span> tem distribuição amostral normal com média <span class="math inline">\(\mu\)</span> (a média populacional, que nunca vamos descobrir) e com desvio-padrão</p>
<p><span class="math display">\[
EP \quad=\quad
\frac{\sigma}{\sqrt{n}} \quad=\quad
\frac{1{,}09}{\sqrt{48}} \quad=\quad
0{,}16
\]</span></p>
</li>
<li>
<p>Eis a distribuição amostral da média, com os <span class="math inline">\(95\%\)</span> centrais de probabilidade em destaque:</p>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-326-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p>O valor crítico correspondente a <span class="math inline">\(c = 0{,}95\)</span> é <span class="math inline">\(z^\star = 1{,}96\)</span>.</p></li>
<li><p>A margem de erro <span class="math inline">\(ME\)</span> vai ser <span class="math inline">\(z^\star \cdot EP = 0{,}31\)</span>.</p></li>
<li>
<p>O intervalo de confiança vai ser</p>
<p><span class="math display">\[
[\quad \overline x - 1{,}96 \cdot EP\quad,\quad \overline x + 1{,}96 \cdot EP\quad]
\quad=\quad
[\quad 5{,}10 \quad,\quad 5{,}72 \quad]
\]</span></p>
</li>
</ul>
</div>
<div id="em-r-9" class="section level4 unnumbered">
<h4>Em R<a class="anchor" aria-label="anchor" href="#em-r-9"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p>Este procedimento é chamado de <span class="hl">teste z.</span></p></li>
<li><p>Este teste pressupõe que você sabe o desvio-padrão populacional; esta situação é tão rara que o R base não tem uma função para isso. Na verdade, o teste z é usado principalmente para fins didáticos.</p></li>
<li>
<p>Vamos carregar um pacote que implementa o teste z:</p>
<div class="sourceCode" id="cb773"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/alanarnholt/BSDA">BSDA</a></span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Esta função recebe o resumo (<em>summary</em>) da amostra e constrói o intervalo de confiança:</p>
<div class="sourceCode" id="cb774"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://alanarnholt.github.io/BSDA/reference/zsum.test.html">zsum.test</a></span><span class="op">(</span>mean.x <span class="op">=</span> <span class="fl">5.41</span>, sigma.x <span class="op">=</span> <span class="fl">1.09</span>, n.x <span class="op">=</span> <span class="fl">48</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 
##  One-sample z-Test
## 
## data:  Summarized x
## z = 34,387, p-value &lt; 0,00000000000000022
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  5,101643 5,718357
## sample estimates:
## mean of x 
##      5,41</code></pre>
</li>
<li><p>De novo, a mesma função calcula um intervalo de confiança e faz um teste de hipótese.</p></li>
</ul>
</div>
</div>
<div id="exemplo-salmões" class="section level3" number="12.4.2">
<h3>
<span class="header-section-number">12.4.2</span> Exemplo: salmões<a class="anchor" aria-label="anchor" href="#exemplo-salm%C3%B5es"><i class="fas fa-link"></i></a>
</h3>
<div class="rmdbox">
<ul>
<li><p>Numa amostra de <span class="math inline">\(150\)</span> salmões, foi medida a concentração do contaminante <em>mirex</em> (um inseticida).</p></li>
<li>
<p>As concentrações (em ppm) estão resumidas na tabela abaixo.</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["location"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mirex"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Chile","2":"0,055"},{"1":"Chile","2":"0,057"},{"1":"Chile","2":"0,052"},{"1":"Chile","2":"0,054"},{"1":"Chile","2":"0,057"},{"1":"Chile","2":"0,050"},{"1":"Chile","2":"0,058"},{"1":"Chile","2":"0,060"},{"1":"Chile","2":"0,052"},{"1":"Chile","2":"0,056"},{"1":"Chile","2":"0,048"},{"1":"Chile","2":"0,047"},{"1":"Chile","2":"0,084"},{"1":"Chile","2":"0,086"},{"1":"Chile","2":"0,088"},{"1":"Chile","2":"0,086"},{"1":"Chile","2":"0,094"},{"1":"Chile","2":"0,092"},{"1":"Chile","2":"0,046"},{"1":"Chile","2":"0,048"},{"1":"Chile","2":"0,034"},{"1":"Chile","2":"0,065"},{"1":"Chile","2":"0,058"},{"1":"Chile","2":"0,058"},{"1":"Chile","2":"0,050"},{"1":"Chile","2":"0,052"},{"1":"Chile","2":"0,050"},{"1":"Chile","2":"0,049"},{"1":"Chile","2":"0,060"},{"1":"Chile","2":"0,052"},{"1":"Eastern Canada","2":"0,057"},{"1":"Eastern Canada","2":"0,000"},{"1":"Eastern Canada","2":"0,056"},{"1":"Eastern Canada","2":"0,000"},{"1":"Eastern Canada","2":"0,040"},{"1":"Eastern Canada","2":"0,000"},{"1":"Eastern Canada","2":"0,076"},{"1":"Eastern Canada","2":"0,084"},{"1":"Eastern Canada","2":"0,069"},{"1":"Eastern Canada","2":"0,075"},{"1":"Eastern Canada","2":"0,075"},{"1":"Eastern Canada","2":"0,078"},{"1":"Eastern Canada","2":"0,094"},{"1":"Eastern Canada","2":"0,095"},{"1":"Eastern Canada","2":"0,095"},{"1":"Eastern Canada","2":"0,091"},{"1":"Eastern Canada","2":"0,068"},{"1":"Eastern Canada","2":"0,073"},{"1":"Eastern Canada","2":"0,061"},{"1":"Eastern Canada","2":"0,059"},{"1":"Eastern Canada","2":"0,058"},{"1":"Eastern Canada","2":"0,067"},{"1":"Eastern Canada","2":"0,070"},{"1":"Eastern Canada","2":"0,070"},{"1":"Faroe Islands","2":"0,097"},{"1":"Faroe Islands","2":"0,093"},{"1":"Faroe Islands","2":"0,102"},{"1":"Faroe Islands","2":"0,126"},{"1":"Faroe Islands","2":"0,119"},{"1":"Faroe Islands","2":"0,113"},{"1":"Faroe Islands","2":"0,162"},{"1":"Faroe Islands","2":"0,167"},{"1":"Faroe Islands","2":"0,156"},{"1":"Faroe Islands","2":"0,173"},{"1":"Faroe Islands","2":"0,172"},{"1":"Faroe Islands","2":"0,176"},{"1":"Faroe Islands","2":"0,162"},{"1":"Faroe Islands","2":"0,174"},{"1":"Faroe Islands","2":"0,178"},{"1":"Faroe Islands","2":"0,194"},{"1":"Faroe Islands","2":"0,159"},{"1":"Faroe Islands","2":"0,182"},{"1":"Faroe Islands","2":"0,180"},{"1":"Faroe Islands","2":"0,173"},{"1":"Faroe Islands","2":"0,193"},{"1":"Maine","2":"0,058"},{"1":"Maine","2":"0,054"},{"1":"Maine","2":"0,059"},{"1":"Maine","2":"0,054"},{"1":"Maine","2":"0,048"},{"1":"Maine","2":"0,063"},{"1":"Norway","2":"0,104"},{"1":"Norway","2":"0,119"},{"1":"Norway","2":"0,115"},{"1":"Norway","2":"0,078"},{"1":"Norway","2":"0,081"},{"1":"Norway","2":"0,087"},{"1":"Norway","2":"0,163"},{"1":"Norway","2":"0,164"},{"1":"Norway","2":"0,171"},{"1":"Norway","2":"0,136"},{"1":"Norway","2":"0,147"},{"1":"Norway","2":"0,131"},{"1":"Scotland","2":"0,133"},{"1":"Scotland","2":"0,121"},{"1":"Scotland","2":"0,141"},{"1":"Scotland","2":"0,143"},{"1":"Scotland","2":"0,162"},{"1":"Scotland","2":"0,156"},{"1":"Scotland","2":"0,073"},{"1":"Scotland","2":"0,073"},{"1":"Scotland","2":"0,066"},{"1":"Scotland","2":"0,143"},{"1":"Scotland","2":"0,137"},{"1":"Scotland","2":"0,134"},{"1":"Scotland","2":"0,151"},{"1":"Scotland","2":"0,149"},{"1":"Scotland","2":"0,152"},{"1":"Scotland","2":"0,130"},{"1":"Scotland","2":"0,131"},{"1":"Scotland","2":"0,133"},{"1":"Scotland","2":"0,127"},{"1":"Scotland","2":"0,128"},{"1":"Scotland","2":"0,135"},{"1":"Scotland","2":"0,151"},{"1":"Scotland","2":"0,165"},{"1":"Scotland","2":"0,151"},{"1":"Scotland","2":"0,145"},{"1":"Scotland","2":"0,139"},{"1":"Scotland","2":"0,133"},{"1":"Scotland","2":"0,167"},{"1":"Scotland","2":"0,149"},{"1":"Scotland","2":"0,151"},{"1":"Washington","2":"0,024"},{"1":"Washington","2":"0,021"},{"1":"Washington","2":"0,000"},{"1":"Washington","2":"0,022"},{"1":"Washington","2":"0,020"},{"1":"Washington","2":"0,020"},{"1":"Washington","2":"0,024"},{"1":"Washington","2":"0,019"},{"1":"Washington","2":"0,021"},{"1":"Western Canada","2":"0,024"},{"1":"Western Canada","2":"0,026"},{"1":"Western Canada","2":"0,020"},{"1":"Western Canada","2":"0,026"},{"1":"Western Canada","2":"0,033"},{"1":"Western Canada","2":"0,026"},{"1":"Western Canada","2":"0,081"},{"1":"Western Canada","2":"0,073"},{"1":"Western Canada","2":"0,073"},{"1":"Western Canada","2":"0,066"},{"1":"Western Canada","2":"0,063"},{"1":"Western Canada","2":"0,071"},{"1":"Western Canada","2":"0,077"},{"1":"Western Canada","2":"0,083"},{"1":"Western Canada","2":"0,073"},{"1":"Western Canada","2":"0,089"},{"1":"Western Canada","2":"0,080"},{"1":"Western Canada","2":"0,085"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</li>
<li><p>A média foi <span class="math inline">\(\overline x = 0{,}09\)</span>ppm.</p></li>
<li><p>O desvio-padrão <em>amostral</em> foi <span class="math inline">\(s = 0{,}05\)</span>ppm.</p></li>
<li><p>Não sabemos o desvio-padrão <em>populacional</em>.</p></li>
<li><p>Vamos construir um intervalo de confiança para a média <em>populacional</em> da concentração de <em>mirex</em>.</p></li>
</ul>
</div>
<div id="teoria-2" class="section level4 unnumbered">
<h4>Teoria<a class="anchor" aria-label="anchor" href="#teoria-2"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p>Como não sabemos <span class="math inline">\(\sigma\)</span>, vamos usar <span class="math inline">\(s\)</span> em seu lugar.</p></li>
<li>
<p>Vamos trabalhar com uma distribuição amostral da média <span class="math inline">\(\overline X\)</span> com média <span class="math inline">\(\mu\)</span> e erro-padrão</p>
<p><span class="math display">\[
EP = \frac{s}{\sqrt{n}}
\]</span></p>
</li>
<li><p>No início do século <span class="math inline">\(20\)</span>, <a href="https://pt.wikipedia.org/wiki/William_Sealy_Gosset">William Gosset</a> descobriu que, <span class="hl">quando substituímos <span class="math inline">\(\sigma\)</span> por <span class="math inline">\(s\)</span> no cálculo do erro-padrão, a distribuição amostral deixa de ser normal e passa a ser a distribuição <span class="math inline">\(t\)</span> de Student.</span> Leia mais <a href="https://estatisticaeetag.blogspot.com/?view=classic">neste site sobre história da Estatística</a>; busque no nome de Gosset para achar o trecho sobre ele.</p></li>
<li><p>Além disso, temos <span class="hl">mais uma condição a ser verificada: quanto menor o tamanho da amostra, mas próximas da normal a distribuição da população e a distribuição da amostra precisam ser</span>, para o método dar certo.</p></li>
<li>
<p>No nosso caso, como <span class="math inline">\(n = 150\)</span>, não precisamos nos preocupar muito. De qualquer forma, eis um histograma da nossa amostra:</p>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-331-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>O histograma é unimodal e aproximadamente simétrico. Isto basta.</p>
</li>
<li><p>A distribuição <span class="math inline">\(t\)</span> é na verdade, uma família de distribuições, dependendo de um parâmetro chamado <em>número de graus de liberdade</em>, geralmente escrito como <span class="math inline">\(\nu\)</span> (falado “ni”).</p></li>
<li>
<p>Quanto maior o valor de <span class="math inline">\(\nu\)</span>, mais parecida com uma normal é a distribuição <span class="math inline">\(t\)</span>, como mostra a figura:</p>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-332-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li>
<p>A distribuição <span class="math inline">\(t\)</span> com <span class="math inline">\(\nu\)</span> graus de liberdade tem</p>
<ul>
<li><p>Média <span class="math inline">\(0\)</span> (se <span class="math inline">\(\nu &gt; 1\)</span>; caso contrário, a média é indefinida).</p></li>
<li><p>Variância <span class="math inline">\(\frac{\nu}{\nu -2}\)</span> (se <span class="math inline">\(\nu &gt; 2\)</span>); variância infinita (se <span class="math inline">\(1 &lt; \nu \leq 2\)</span>); variância indefinida para todos os outros casos.</p></li>
</ul>
</li>
<li><p>No R, você pode usar as funções <code>dt</code>, <code>pt</code>, <code>qt</code> e <code>rt</code> para, respectivamente, computar a densidade, a probabilidade acumulada, os quantis e para sortear valores de acordo com a distribuição <span class="math inline">\(t\)</span>.</p></li>
<li><p>Quando nossa amostra tiver tamanho <span class="math inline">\(n\)</span>, vamos trabalhar com a distribuição <span class="math inline">\(t\)</span> com <span class="math inline">\(n - 1\)</span> graus de liberdade.</p></li>
<li><p>Então, no exemplo, <span class="math inline">\(\nu = 150 - 1 = 149\)</span>.</p></li>
<li>
<p>Computamos o intervalo de confiança como antes, mas o valor crítico agora vai ser dado não pela normal, mas sim pela distribuição <span class="math inline">\(t\)</span> com <span class="math inline">\(149\)</span> graus de liberdade:</p>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-333-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p>Lembre-se de que, com a normal, o valor crítico para o nível de confiança de <span class="math inline">\(95\%\)</span> era <span class="math inline">\(1{,}96\)</span>. Como a distribuição <span class="math inline">\(t\)</span> tem as caudas mais pesadas, aqui o valor crítico ficou um pouco maior: é preciso se afastar um pouco mais da média para obter <span class="math inline">\(95\%\)</span> da área sob a curva.</p></li>
<li>
<p>A margem de erro vai ser</p>
<p><span class="math display">\[
ME \quad=\quad
t^\star \cdot EP \quad=\quad
t^\star \cdot \frac{s}{\sqrt{n}} \quad=\quad
1{,}98 \cdot \frac{0{,}05}{12{,}25}  \quad=\quad
0{,}01
\]</span></p>
</li>
<li>
<p>O intervalo de confiança para a média populacional, com nível de confiança de <span class="math inline">\(95\%\)</span> é</p>
<p><span class="math display">\[
[\quad \overline x - ME \quad,\quad \overline x + ME \quad]
\quad=\quad
[\quad
0{,}08
\quad,\quad
0{,}10\quad]
\]</span></p>
</li>
</ul>
</div>
<div id="em-r-10" class="section level4 unnumbered">
<h4>Em R<a class="anchor" aria-label="anchor" href="#em-r-10"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p>Este procedimento é chamado de <span class="hl">teste t.</span></p></li>
<li>
<p>No R base, use a função <code>t.test</code>, que também faz teste de hipóteses.</p>
<div class="sourceCode" id="cb776"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">salmoes</span><span class="op">$</span><span class="va">mirex</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  salmoes$mirex
## t = 22,589, df = 149, p-value &lt; 0,00000000000000022
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  0,08334978 0,09933022
## sample estimates:
## mean of x 
##   0,09134</code></pre>
</li>
</ul>
</div>
</div>
<div id="exercícios-15" class="section level3" number="12.4.3">
<h3>
<span class="header-section-number">12.4.3</span> Exercícios<a class="anchor" aria-label="anchor" href="#exerc%C3%ADcios-15"><i class="fas fa-link"></i></a>
</h3>
<div id="uma-função-para-o-teste-z" class="section level4 unnumbered">
<h4>Uma função para o teste z<a class="anchor" aria-label="anchor" href="#uma-fun%C3%A7%C3%A3o-para-o-teste-z"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<p>Implemente a sua própria função para construir um intervalo de confiança quando <span class="math inline">\(\sigma\)</span> é conhecido. Os parâmetros devem ser</p>
<ul>
<li><p><span class="math inline">\(\overline x\)</span></p></li>
<li><p><span class="math inline">\(n\)</span></p></li>
<li><p><span class="math inline">\(\sigma\)</span></p></li>
<li><p><code>conf</code>: o nível de confiança, um valor entre <span class="math inline">\(0\)</span> e <span class="math inline">\(1\)</span></p></li>
</ul>
</li>
<li><p>Teste sua função com vários exercícios do livro. Compare com os resultados de <code><a href="https://alanarnholt.github.io/BSDA/reference/zsum.test.html">BSDA::zsum.test</a></code>.</p></li>
</ul>
</div>
<div id="uma-função-para-o-teste-t" class="section level4 unnumbered">
<h4>Uma função para o teste t<a class="anchor" aria-label="anchor" href="#uma-fun%C3%A7%C3%A3o-para-o-teste-t"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<p>Implemente a sua própria função para construir um intervalo de confiança quando <span class="math inline">\(\sigma\)</span> não é conhecido. Os parâmetros devem ser</p>
<ul>
<li><p><span class="math inline">\(\overline x\)</span></p></li>
<li><p><span class="math inline">\(n\)</span></p></li>
<li><p><span class="math inline">\(s\)</span></p></li>
<li><p><code>conf</code>: o nível de confiança, um valor entre <span class="math inline">\(0\)</span> e <span class="math inline">\(1\)</span></p></li>
</ul>
</li>
<li><p>Teste sua função com vários exercícios do livro. Compare com os resultados de <code>t.test</code>.</p></li>
</ul>
</div>
<div id="tamanho-mínimo-da-amostra" class="section level4 unnumbered">
<h4>Tamanho mínimo da amostra<a class="anchor" aria-label="anchor" href="#tamanho-m%C3%ADnimo-da-amostra"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p>Reveja a aula sobre intervalos de confiança para proporções. Lá, falamos sobre como calcular <span class="math inline">\(n\)</span> em função do nível de confiança e da margem de erro desejada.</p></li>
<li><p>Faça o mesmo para o teste t. Isto é, obtenha uma fórmula que dê o valor mínimo de <span class="math inline">\(n\)</span> em função do nível de confiança <span class="math inline">\(c\)</span> e da margem de erro <span class="math inline">\(ME\)</span>.</p></li>
</ul>
</div>
</div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

init_exercises = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

$(init_exercises)

</script><div class="chapter-nav">
<div class="prev"><a href="tcl.html"><span class="header-section-number">11</span> Teorema central do limite</a></div>
<div class="next"><a href="th.html"><span class="header-section-number">13</span> Testes de hipóteses</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="Nesta página"><h2>Nesta página</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#ic"><span class="header-section-number">12</span> Intervalos de confiança</a></li>
<li><a class="nav-link" href="#v%C3%ADdeo-1-6"><span class="header-section-number">12.1</span> Vídeo 1</a></li>
<li>
<a class="nav-link" href="#intervalos-de-confian%C3%A7a-para-a-propor%C3%A7%C3%A3o"><span class="header-section-number">12.2</span> Intervalos de confiança para a proporção</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#exemplo-quem-posta-no-fb-diariamente"><span class="header-section-number">12.2.1</span> Exemplo: quem posta no FB diariamente?</a></li>
<li><a class="nav-link" href="#o-que-quer-dizer-95-de-confian%C3%A7a">O que quer dizer \(\;95\%\) de confiança?</a></li>
<li><a class="nav-link" href="#no-geral-9"><span class="header-section-number">12.2.2</span> No geral</a></li>
<li><a class="nav-link" href="#escolhendo-o-tamanho-da-amostra"><span class="header-section-number">12.2.3</span> Escolhendo o tamanho da amostra</a></li>
<li><a class="nav-link" href="#em-r-8"><span class="header-section-number">12.2.4</span> Em R</a></li>
</ul>
</li>
<li><a class="nav-link" href="#v%C3%ADdeo-2-5"><span class="header-section-number">12.3</span> Vídeo 2</a></li>
<li>
<a class="nav-link" href="#intervalos-de-confian%C3%A7a-para-a-m%C3%A9dia"><span class="header-section-number">12.4</span> Intervalos de confiança para a média</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#exemplo-pre%C3%A7o-m%C3%A9dio-da-gasolina"><span class="header-section-number">12.4.1</span> Exemplo: preço médio da gasolina</a></li>
<li><a class="nav-link" href="#exemplo-salm%C3%B5es"><span class="header-section-number">12.4.2</span> Exemplo: salmões</a></li>
<li><a class="nav-link" href="#exerc%C3%ADcios-15"><span class="header-section-number">12.4.3</span> Exercícios</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/fnaufel/probestr/blob/master/ic.Rmd">Ver código-fonte <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/fnaufel/probestr/edit/master/ic.Rmd">Editar esta página <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Probabilidade e Estatística com R</strong>" por Fernando Náufel (versão de 03/11/2023)</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>Criado com o <a class="text-light" href="https://bookdown.org">pacote bookdown</a> do R.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
