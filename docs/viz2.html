<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 5 Visualização com ggplot2 (continuação) | Probabilidade e Estatística com R</title>
<meta name="author" content="Fernando Náufel">
<meta name="description" content="Busque mais informações sobre os pacotes tidyverse e ggplot2 nas referências recomendadas.  5.1 Vídeo 1    5.2 Boxplots  5.2.1 Conjunto de dados  Vamos continuar a trabalhar com os dados sobre as...">
<meta name="generator" content="bookdown 0.36 with bs4_book()">
<meta property="og:title" content="Capítulo 5 Visualização com ggplot2 (continuação) | Probabilidade e Estatística com R">
<meta property="og:type" content="book">
<meta property="og:image" content="/images/640px-Nightingale-mortality.jpg">
<meta property="og:description" content="Busque mais informações sobre os pacotes tidyverse e ggplot2 nas referências recomendadas.  5.1 Vídeo 1    5.2 Boxplots  5.2.1 Conjunto de dados  Vamos continuar a trabalhar com os dados sobre as...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 5 Visualização com ggplot2 (continuação) | Probabilidade e Estatística com R">
<meta name="twitter:description" content="Busque mais informações sobre os pacotes tidyverse e ggplot2 nas referências recomendadas.  5.1 Vídeo 1    5.2 Boxplots  5.2.1 Conjunto de dados  Vamos continuar a trabalhar com os dados sobre as...">
<meta name="twitter:image" content="/images/640px-Nightingale-mortality.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lexend-0.4.7/font.css" rel="stylesheet">
<link href="libs/JetBrains_Mono-0.4.7/font.css" rel="stylesheet">
<link href="libs/Roboto-0.4.7/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="html_files/alterar_detalhes.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="html_files/styles_all.css">
<link rel="stylesheet" href="html_files/styles_book.css">
<link rel="stylesheet" href="html_files/webex.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Ir para conteúdo principal</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Probabilidade e Estatística com R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Mostrar sumário</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Buscar" aria-label="Buscar">
</form>

      <nav aria-label="Conteúdo"><h2>Conteúdo</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Apresentação</a></li>
<li><a class="" href="oque.html"><span class="header-section-number">1</span> O que é estatística?</a></li>
<li><a class="" href="rintro.html"><span class="header-section-number">2</span> Introdução a R</a></li>
<li><a class="" href="introdu%C3%A7%C3%A3o-ao-tidyverse.html"><span class="header-section-number">3</span> Introdução ao tidyverse</a></li>
<li><a class="" href="viz.html"><span class="header-section-number">4</span> Visualização com ggplot2</a></li>
<li><a class="active" href="viz2.html"><span class="header-section-number">5</span> Visualização com ggplot2 (continuação)</a></li>
<li><a class="" href="medidas.html"><span class="header-section-number">6</span> Medidas</a></li>
<li><a class="" href="probs.html"><span class="header-section-number">7</span> Probabilidades</a></li>
<li><a class="" href="variaveis.html"><span class="header-section-number">8</span> Variáveis aleatórias</a></li>
<li><a class="" href="discretas.html"><span class="header-section-number">9</span> Distribuições discretas</a></li>
<li><a class="" href="distribui%C3%A7%C3%B5es-cont%C3%ADnuas.html"><span class="header-section-number">10</span> Distribuições contínuas</a></li>
<li><a class="" href="tcl.html"><span class="header-section-number">11</span> Teorema central do limite</a></li>
<li><a class="" href="ic.html"><span class="header-section-number">12</span> Intervalos de confiança</a></li>
<li><a class="" href="th.html"><span class="header-section-number">13</span> Testes de hipóteses</a></li>
<li><a class="" href="corr.html"><span class="header-section-number">14</span> Covariância e correlação</a></li>
<li><a class="" href="refer%C3%AAncias.html">Referências</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/fnaufel/probestr">Ver código-fonte do livro <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="viz2" class="section level1" number="5">
<h1>
<span class="header-section-number">Capítulo 5</span> Visualização com ggplot2 (continuação)<a class="anchor" aria-label="anchor" href="#viz2"><i class="fas fa-link"></i></a>
</h1>
<div class="rmdtip">
<p>Busque mais informações sobre os pacotes <code>tidyverse</code> e <code>ggplot2</code> <a href="index.html#refrec">nas referências recomendadas</a>.</p>
</div>
<div id="vídeo-1-3" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Vídeo 1<a class="anchor" aria-label="anchor" href="#v%C3%ADdeo-1-3"><i class="fas fa-link"></i></a>
</h2>
<iframe src="https://www.youtube.com/embed/TjgLDeIQHIc" width="100%" height="400px" data-external="1" class="center" style="width: 80%;">
</iframe>
</div>
<div id="boxplots" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> <em>Boxplots</em><a class="anchor" aria-label="anchor" href="#boxplots"><i class="fas fa-link"></i></a>
</h2>
<div id="conjunto-de-dados" class="section level3" number="5.2.1">
<h3>
<span class="header-section-number">5.2.1</span> Conjunto de dados<a class="anchor" aria-label="anchor" href="#conjunto-de-dados"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<p>Vamos continuar a trabalhar com os dados sobre as horas de sono de alguns mamíferos:</p>
<div class="sourceCode" id="cb318"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sono</span> <span class="op">&lt;-</span> <span class="va">msleep</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">vore</span>, <span class="va">order</span>, <span class="va">sleep_total</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sono</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["vore"],"name":[2],"type":["chr"],"align":["left"]},{"label":["order"],"name":[3],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Cheetah","2":"carni","3":"Carnivora","4":"12,1"},{"1":"Owl monkey","2":"omni","3":"Primates","4":"17,0"},{"1":"Mountain beaver","2":"herbi","3":"Rodentia","4":"14,4"},{"1":"Greater short-tailed shrew","2":"omni","3":"Soricomorpha","4":"14,9"},{"1":"Cow","2":"herbi","3":"Artiodactyla","4":"4,0"},{"1":"Three-toed sloth","2":"herbi","3":"Pilosa","4":"14,4"},{"1":"Northern fur seal","2":"carni","3":"Carnivora","4":"8,7"},{"1":"Vesper mouse","2":"NA","3":"Rodentia","4":"7,0"},{"1":"Dog","2":"carni","3":"Carnivora","4":"10,1"},{"1":"Roe deer","2":"herbi","3":"Artiodactyla","4":"3,0"},{"1":"Goat","2":"herbi","3":"Artiodactyla","4":"5,3"},{"1":"Guinea pig","2":"herbi","3":"Rodentia","4":"9,4"},{"1":"Grivet","2":"omni","3":"Primates","4":"10,0"},{"1":"Chinchilla","2":"herbi","3":"Rodentia","4":"12,5"},{"1":"Star-nosed mole","2":"omni","3":"Soricomorpha","4":"10,3"},{"1":"African giant pouched rat","2":"omni","3":"Rodentia","4":"8,3"},{"1":"Lesser short-tailed shrew","2":"omni","3":"Soricomorpha","4":"9,1"},{"1":"Long-nosed armadillo","2":"carni","3":"Cingulata","4":"17,4"},{"1":"Tree hyrax","2":"herbi","3":"Hyracoidea","4":"5,3"},{"1":"North American Opossum","2":"omni","3":"Didelphimorphia","4":"18,0"},{"1":"Asian elephant","2":"herbi","3":"Proboscidea","4":"3,9"},{"1":"Big brown bat","2":"insecti","3":"Chiroptera","4":"19,7"},{"1":"Horse","2":"herbi","3":"Perissodactyla","4":"2,9"},{"1":"Donkey","2":"herbi","3":"Perissodactyla","4":"3,1"},{"1":"European hedgehog","2":"omni","3":"Erinaceomorpha","4":"10,1"},{"1":"Patas monkey","2":"omni","3":"Primates","4":"10,9"},{"1":"Western american chipmunk","2":"herbi","3":"Rodentia","4":"14,9"},{"1":"Domestic cat","2":"carni","3":"Carnivora","4":"12,5"},{"1":"Galago","2":"omni","3":"Primates","4":"9,8"},{"1":"Giraffe","2":"herbi","3":"Artiodactyla","4":"1,9"},{"1":"Pilot whale","2":"carni","3":"Cetacea","4":"2,7"},{"1":"Gray seal","2":"carni","3":"Carnivora","4":"6,2"},{"1":"Gray hyrax","2":"herbi","3":"Hyracoidea","4":"6,3"},{"1":"Human","2":"omni","3":"Primates","4":"8,0"},{"1":"Mongoose lemur","2":"herbi","3":"Primates","4":"9,5"},{"1":"African elephant","2":"herbi","3":"Proboscidea","4":"3,3"},{"1":"Thick-tailed opposum","2":"carni","3":"Didelphimorphia","4":"19,4"},{"1":"Macaque","2":"omni","3":"Primates","4":"10,1"},{"1":"Mongolian gerbil","2":"herbi","3":"Rodentia","4":"14,2"},{"1":"Golden hamster","2":"herbi","3":"Rodentia","4":"14,3"},{"1":"Vole","2":"herbi","3":"Rodentia","4":"12,8"},{"1":"House mouse","2":"herbi","3":"Rodentia","4":"12,5"},{"1":"Little brown bat","2":"insecti","3":"Chiroptera","4":"19,9"},{"1":"Round-tailed muskrat","2":"herbi","3":"Rodentia","4":"14,6"},{"1":"Slow loris","2":"carni","3":"Primates","4":"11,0"},{"1":"Degu","2":"herbi","3":"Rodentia","4":"7,7"},{"1":"Northern grasshopper mouse","2":"carni","3":"Rodentia","4":"14,5"},{"1":"Rabbit","2":"herbi","3":"Lagomorpha","4":"8,4"},{"1":"Sheep","2":"herbi","3":"Artiodactyla","4":"3,8"},{"1":"Chimpanzee","2":"omni","3":"Primates","4":"9,7"},{"1":"Tiger","2":"carni","3":"Carnivora","4":"15,8"},{"1":"Jaguar","2":"carni","3":"Carnivora","4":"10,4"},{"1":"Lion","2":"carni","3":"Carnivora","4":"13,5"},{"1":"Baboon","2":"omni","3":"Primates","4":"9,4"},{"1":"Desert hedgehog","2":"NA","3":"Erinaceomorpha","4":"10,3"},{"1":"Potto","2":"omni","3":"Primates","4":"11,0"},{"1":"Deer mouse","2":"NA","3":"Rodentia","4":"11,5"},{"1":"Phalanger","2":"NA","3":"Diprotodontia","4":"13,7"},{"1":"Caspian seal","2":"carni","3":"Carnivora","4":"3,5"},{"1":"Common porpoise","2":"carni","3":"Cetacea","4":"5,6"},{"1":"Potoroo","2":"herbi","3":"Diprotodontia","4":"11,1"},{"1":"Giant armadillo","2":"insecti","3":"Cingulata","4":"18,1"},{"1":"Rock hyrax","2":"NA","3":"Hyracoidea","4":"5,4"},{"1":"Laboratory rat","2":"herbi","3":"Rodentia","4":"13,0"},{"1":"African striped mouse","2":"omni","3":"Rodentia","4":"8,7"},{"1":"Squirrel monkey","2":"omni","3":"Primates","4":"9,6"},{"1":"Eastern american mole","2":"insecti","3":"Soricomorpha","4":"8,4"},{"1":"Cotton rat","2":"herbi","3":"Rodentia","4":"11,3"},{"1":"Mole rat","2":"NA","3":"Rodentia","4":"10,6"},{"1":"Arctic ground squirrel","2":"herbi","3":"Rodentia","4":"16,6"},{"1":"Thirteen-lined ground squirrel","2":"herbi","3":"Rodentia","4":"13,8"},{"1":"Golden-mantled ground squirrel","2":"herbi","3":"Rodentia","4":"15,9"},{"1":"Musk shrew","2":"NA","3":"Soricomorpha","4":"12,8"},{"1":"Pig","2":"omni","3":"Artiodactyla","4":"9,1"},{"1":"Short-nosed echidna","2":"insecti","3":"Monotremata","4":"8,6"},{"1":"Eastern american chipmunk","2":"herbi","3":"Rodentia","4":"15,8"},{"1":"Brazilian tapir","2":"herbi","3":"Perissodactyla","4":"4,4"},{"1":"Tenrec","2":"omni","3":"Afrosoricida","4":"15,6"},{"1":"Tree shrew","2":"omni","3":"Scandentia","4":"8,9"},{"1":"Bottle-nosed dolphin","2":"carni","3":"Cetacea","4":"5,2"},{"1":"Genet","2":"carni","3":"Carnivora","4":"6,3"},{"1":"Arctic fox","2":"carni","3":"Carnivora","4":"12,5"},{"1":"Red fox","2":"carni","3":"Carnivora","4":"9,8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</li>
</ul>
</div>
<div id="mediana" class="section level3" number="5.2.2">
<h3>
<span class="header-section-number">5.2.2</span> Mediana e quartis<a class="anchor" aria-label="anchor" href="#mediana"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p>Para entender <em>boxplots</em>, precisamos, antes, entender algumas medidas.</p></li>
<li>
<p>Se tomarmos as quantidades de horas de sono de todos os animais do conjunto de dados e <span class="hl">classificarmos estas quantidades em ordem crescente</span>, vamos ter:</p>
<div class="sourceCode" id="cb319"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">horas</span> <span class="op">&lt;-</span> <span class="va">sono</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">sleep_total</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">horas</span></span></code></pre></div>
<pre><code>##  [1]  1,9  2,7  2,9  3,0  3,1  3,3  3,5  3,8  3,9  4,0  4,4  5,2  5,3  5,3  5,4  5,6
## [17]  6,2  6,3  6,3  7,0  7,7  8,0  8,3  8,4  8,4  8,6  8,7  8,7  8,9  9,1  9,1  9,4
## [33]  9,4  9,5  9,6  9,7  9,8  9,8 10,0 10,1 10,1 10,1 10,3 10,3 10,4 10,6 10,9 11,0
## [49] 11,0 11,1 11,3 11,5 12,1 12,5 12,5 12,5 12,5 12,8 12,8 13,0 13,5 13,7 13,8 14,2
## [65] 14,3 14,4 14,4 14,5 14,6 14,9 14,9 15,6 15,8 15,8 15,9 16,6 17,0 17,4 18,0 18,1
## [81] 19,4 19,7 19,9</code></pre>
</li>
<li>
<p>Quantos valores são?</p>
<div class="sourceCode" id="cb321"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 83</code></pre>
</li>
<li>
<p>O valor que está <span class="hl">bem no meio desta fila</span> — i.e., na posição <span class="math inline">\(42\)</span> — é a <span class="hl">mediana</span>:</p>
<div class="sourceCode" id="cb323"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">horas</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] 10,1</code></pre>
</li>
<li>
<p>Em R:</p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 10,1</code></pre>
<div class="rmdcaution">
<p>Mediana e média são coisas muito diferentes.</p>
<p>Por acaso, neste exemplo, a média das horas é próxima da mediana:</p>
<div class="sourceCode" id="cb327"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 10,43373</code></pre>
<p>Isto costuma acontecer quando a distribuição dos dados é aproximadamente simétrica.</p>
</div>
</li>
<li>
<p>Os <span class="hl">quartis</span> são os valores que estão nas posições <span class="math inline">\(\frac14\)</span>, <span class="math inline">\(\frac12\)</span> e <span class="math inline">\(\frac34\)</span> da fila. São o <span class="hl">primeiro, segundo e terceiro quartis</span>, respectivamente.</p>
<div class="sourceCode" id="cb329"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">horas</span><span class="op">[</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span> <span class="op">/</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="fl">3</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span> <span class="op">/</span> <span class="fl">4</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1]  7,7 10,1 13,8</code></pre>
</li>
<li><p><span class="hl">Sim, a mediana é o segundo quartil.</span></p></li>
<li>
<p>Em R, a <span class="hl">função <code>quantile</code></span> generaliza esta idéia: dado um número <span class="math inline">\(q\)</span> entre <span class="math inline">\(0\)</span> e <span class="math inline">\(1\)</span>, <span class="hl">o quantil (com “N”) <span class="math inline">\(q\)</span> é o elemento que está na posição que corresponde à fração <span class="math inline">\(q\)</span> da fila ordenada.</span></p>
<div class="sourceCode" id="cb331"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">horas</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.25</span>, <span class="fl">.5</span>, <span class="fl">.75</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   25%   50%   75% 
##  7,85 10,10 13,75</code></pre>
</li>
<li><p>Na verdade, R tem <span class="math inline">\(9\)</span> algoritmos diferentes para calcular os quantis de uma amostra! Leia a ajuda da função <code>quantile</code> para conhecê-los.</p></li>
<li><p>As diferenças entre nossos cálculos “à mão” e os resultados retornados por <code>quantile</code> são porque, em algumas situações, <code>quantile</code> calcula uma média ponderada entre elementos vizinhos. Por isso, <code>quantile</code> pode retornar valores que nem estão no vetor.</p></li>
<li>
<p>Em R, a <span class="hl">função <code>summary</code></span> mostra o <span class="hl">mínimo</span>, os <span class="hl">quartis (com “R”)</span>, a <span class="hl">média</span>, e o <span class="hl">máximo</span> de um vetor:</p>
<div class="sourceCode" id="cb333"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1,90    7,85   10,10   10,43   13,75   19,90</code></pre>
</li>
</ul>
</div>
<div id="média-times-mediana" class="section level3" number="5.2.3">
<h3>
<span class="header-section-number">5.2.3</span> Média <span class="math inline">\(\times\)</span> mediana<a class="anchor" aria-label="anchor" href="#m%C3%A9dia-times-mediana"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p>Vamos ver um exemplo simples para entender a diferença entre a média e a mediana.</p></li>
<li>
<p>Imagine o seguinte vetor com as receitas mensais de algumas pessoas (em milhares de reais:)</p>
<div class="sourceCode" id="cb335"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">receitas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3.5</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Eis a mediana e a média deste vetor:</p>
<div class="sourceCode" id="cb336"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">receitas</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Median'</span>, <span class="st">'Mean'</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>##   Median     Mean 
## 2,000000 2,071429</code></pre>
</li>
<li><p>A mediana e a média são bem próximas.</p></li>
<li>
<p>Imagine, agora, que adicionamos ao vetor um sujeito com receita mensal de <span class="math inline">\(100\)</span> mil reais:</p>
<div class="sourceCode" id="cb338"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">receitas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3.5</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Eis a nova mediana e a nova média:</p>
<div class="sourceCode" id="cb339"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">receitas</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Median'</span>, <span class="st">'Mean'</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>##  Median    Mean 
##  2,0000 14,3125</code></pre>
</li>
<li><p>O sujeito com a receita de <span class="math inline">\(2\)</span> mil reais continua no meio da fila, mas a média (que é a soma de todas as receitas, dividida pelo número de indivíduos) ficou muito diferente.</p></li>
<li><p>A receita do novo sujeito é um <span class="hl">valor discrepante</span>, ou, em inglês, um <span class="hl"><em>outlier</em></span>.</p></li>
</ul>
<div class="rmdimportant">
<p><strong>Conclusão:</strong></p>
<p>A <span class="hl">mediana é robusta</span>, pouco afetada por <em>outliers</em>.</p>
<p>A <span class="hl">média é pouco robusta</span>, muito sensível a <em>outliers</em>.</p>
</div>
</div>
<div id="intervalo-interquartil-iqr-e-outliers" class="section level3" number="5.2.4">
<h3>
<span class="header-section-number">5.2.4</span> Intervalo interquartil (IQR) e <em>outliers</em><a class="anchor" aria-label="anchor" href="#intervalo-interquartil-iqr-e-outliers"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<p>Qual fração dos elementos está <span class="hl">entre o primeiro e o terceiro quartis?</span></p>
<div class="sourceCode" id="cb341"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span></span>
<span>  <span class="va">horas</span><span class="op">[</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span><span class="op">(</span><span class="va">horas</span>, <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">horas</span>, <span class="fl">.25</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">horas</span>, <span class="fl">.75</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span> <span class="op">/</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span></span>
<span>  <span class="va">horas</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 0,4939759</code></pre>
</li>
<li><p><span class="hl">Metade</span> do total de elementos está entre o primeiro e o terceiro quartis.</p></li>
<li><p>Este é o chamado <span class="hl">intervalo interquartil</span> (<em>interquartile range</em>, em inglês).</p></li>
<li>
<p>No nosso vetor <code>horas</code>, os <span class="hl">limites do IQR</span> são</p>
<div class="sourceCode" id="cb343"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">horas</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.25</span>, <span class="fl">.75</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   25%   75% 
##  7,85 13,75</code></pre>
</li>
<li>
<p>O <span class="hl">comprimento</span> deste intervalo é calculado pela função <code>IQR</code>:</p>
<div class="sourceCode" id="cb345"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 5,9</code></pre>
</li>
<li><p>Valores <span class="hl">muito abaixo do primeiro quartil</span> podem ser considerados discrepantes (<em>outliers</em>), mas quão abaixo?</p></li>
<li><p>A resposta (puramente convencional) é <span class="hl"><span class="math inline">\(1{,}5 \times \text{IQR}\)</span> abaixo do primeiro quartil.</span></p></li>
<li>
<p>No nosso vetor <code>horas</code>, isto significa valores abaixo de</p>
<div class="sourceCode" id="cb347"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">limite_inferior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">horas</span>, <span class="fl">.25</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1.5</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unname.html">unname</a></span><span class="op">(</span><span class="va">limite_inferior</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] -1</code></pre>
</li>
<li>
<p>Neste caso, não há <em>outliers</em>:</p>
<div class="sourceCode" id="cb349"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">horas</span><span class="op">[</span><span class="va">horas</span> <span class="op">&lt;</span> <span class="va">limite_inferior</span><span class="op">]</span></span></code></pre></div>
<pre><code>## numeric(0)</code></pre>
</li>
<li><p>Da mesma forma, valores <span class="hl">muito acima do terceiro quartil</span> podem ser considerados discrepantes (<em>outliers</em>), mas quão acima?</p></li>
<li><p>De novo, a resposta (puramente convencional) é <span class="hl"><span class="math inline">\(1{,}5 \times \text{IQR}\)</span> acima do terceiro quartil.</span></p></li>
<li>
<p>No nosso vetor <code>horas</code>, isto significa valores acima de</p>
<div class="sourceCode" id="cb351"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">limite_superior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">horas</span>, <span class="fl">.75</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1.5</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unname.html">unname</a></span><span class="op">(</span><span class="va">limite_superior</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 22,6</code></pre>
</li>
<li>
<p>Neste caso, também não há <em>outliers</em>:</p>
<div class="sourceCode" id="cb353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">horas</span><span class="op">[</span><span class="va">horas</span> <span class="op">&gt;</span> <span class="va">limite_superior</span><span class="op">]</span></span></code></pre></div>
<pre><code>## numeric(0)</code></pre>
</li>
<li>
<p>Outro exemplo: vamos tomar apenas os mamíferos onívoros:</p>
<div class="sourceCode" id="cb355"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">onivoros</span> <span class="op">&lt;-</span> <span class="va">sono</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">vore</span> <span class="op">==</span> <span class="st">'omni'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">onivoros</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["vore"],"name":[2],"type":["chr"],"align":["left"]},{"label":["order"],"name":[3],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Owl monkey","2":"omni","3":"Primates","4":"17,0"},{"1":"Greater short-tailed shrew","2":"omni","3":"Soricomorpha","4":"14,9"},{"1":"Grivet","2":"omni","3":"Primates","4":"10,0"},{"1":"Star-nosed mole","2":"omni","3":"Soricomorpha","4":"10,3"},{"1":"African giant pouched rat","2":"omni","3":"Rodentia","4":"8,3"},{"1":"Lesser short-tailed shrew","2":"omni","3":"Soricomorpha","4":"9,1"},{"1":"North American Opossum","2":"omni","3":"Didelphimorphia","4":"18,0"},{"1":"European hedgehog","2":"omni","3":"Erinaceomorpha","4":"10,1"},{"1":"Patas monkey","2":"omni","3":"Primates","4":"10,9"},{"1":"Galago","2":"omni","3":"Primates","4":"9,8"},{"1":"Human","2":"omni","3":"Primates","4":"8,0"},{"1":"Macaque","2":"omni","3":"Primates","4":"10,1"},{"1":"Chimpanzee","2":"omni","3":"Primates","4":"9,7"},{"1":"Baboon","2":"omni","3":"Primates","4":"9,4"},{"1":"Potto","2":"omni","3":"Primates","4":"11,0"},{"1":"African striped mouse","2":"omni","3":"Rodentia","4":"8,7"},{"1":"Squirrel monkey","2":"omni","3":"Primates","4":"9,6"},{"1":"Pig","2":"omni","3":"Artiodactyla","4":"9,1"},{"1":"Tenrec","2":"omni","3":"Afrosoricida","4":"15,6"},{"1":"Tree shrew","2":"omni","3":"Scandentia","4":"8,9"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</li>
<li>
<p>Vamos extrair o vetor de horas de sono:</p>
<div class="sourceCode" id="cb356"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">horas</span> <span class="op">&lt;-</span> <span class="va">onivoros</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">sleep_total</span><span class="op">)</span></span>
<span></span>
<span><span class="va">horas</span></span></code></pre></div>
<pre><code>##  [1] 17,0 14,9 10,0 10,3  8,3  9,1 18,0 10,1 10,9  9,8  8,0 10,1  9,7  9,4 11,0  8,7
## [17]  9,6  9,1 15,6  8,9</code></pre>
</li>
<li>
<p>Vamos calcular o primeiro e terceiro quartis:</p>
<div class="sourceCode" id="cb358"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quartis</span> <span class="op">&lt;-</span> <span class="va">horas</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.25</span>, <span class="fl">.75</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">quartis</span></span></code></pre></div>
<pre><code>##    25%    75% 
##  9,100 10,925</code></pre>
</li>
<li>
<p>Vamos achar o IQR:</p>
<div class="sourceCode" id="cb360"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1,825</code></pre>
</li>
<li>
<p>E os limites a partir dos quais os valores são <em>outliers</em>:</p>
<div class="sourceCode" id="cb362"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">limites</span> <span class="op">&lt;-</span> <span class="va">quartis</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1.5</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">horas</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unname.html">unname</a></span><span class="op">(</span><span class="va">limites</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1]  6,3625 13,6625</code></pre>
</li>
<li>
<p>Existem <em>outliers</em> inferiores?</p>
<div class="sourceCode" id="cb364"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">onivoros</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">sleep_total</span> <span class="op">&lt;</span> <span class="va">limites</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["vore"],"name":[2],"type":["chr"],"align":["left"]},{"label":["order"],"name":[3],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Não.</p>
</li>
<li>
<p>Existem <em>outliers</em> superiores?</p>
<div class="sourceCode" id="cb365"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">onivoros</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">sleep_total</span> <span class="op">&gt;</span> <span class="va">limites</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["vore"],"name":[2],"type":["chr"],"align":["left"]},{"label":["order"],"name":[3],"type":["chr"],"align":["left"]},{"label":["sleep_total"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Owl monkey","2":"omni","3":"Primates","4":"17,0"},{"1":"Greater short-tailed shrew","2":"omni","3":"Soricomorpha","4":"14,9"},{"1":"North American Opossum","2":"omni","3":"Didelphimorphia","4":"18,0"},{"1":"Tenrec","2":"omni","3":"Afrosoricida","4":"15,6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Sim! Estes animais dormem demais em comparação com os outros onívoros.</p>
</li>
</ul>
</div>
<div id="gerando-boxplots" class="section level3" number="5.2.5">
<h3>
<span class="header-section-number">5.2.5</span> Gerando boxplots<a class="anchor" aria-label="anchor" href="#gerando-boxplots"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p><span class="hl">Um <em>boxplot</em> é uma representação visual dos valores que calculamos acima.</span></p></li>
<li>
<p>No <code>ggplot2</code>, <span class="hl">a geometria <code>geom_boxplot</code> constrói <em>boxplots</em>:</span></p>
<div class="sourceCode" id="cb366"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sono</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">sleep_total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'gray'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-214-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p>A <span class="hl">caixa</span> vai do valor do <span class="hl">primeiro quartil</span> (embaixo) até o <span class="hl">terceiro quartil</span> (em cima).</p></li>
<li><p>A <span class="hl">linha horizontal dentro da caixa</span> representa o valor da <span class="hl">mediana</span>.</p></li>
<li><p>As <span class="hl">linhas verticais</span> acima e abaixo da caixa (pitorescamente chamadas de “bigodes”) vão até o <span class="hl">limite inferior</span> (primeiro quartil <span class="math inline">\({}- 1{,}5 \times \text{IQR}\)</span>) e até o <span class="hl">limite superior</span> (terceiro quartil <span class="math inline">\({}+ 1{,}5 \times \text{IQR}\)</span>).</p></li>
<li><p>Neste <em>boxplot</em>, não há <em>outliers</em>.</p></li>
<li>
<p><span id="onivoros"></span> Podemos usar a posição <span class="math inline">\(x\)</span> para desenhar vários <em>boxplots</em>, um para cada dieta:</p>
<div class="sourceCode" id="cb367"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sono</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">vore</span>, y <span class="op">=</span> <span class="va">sleep_total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'gray'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-215-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p>No <em>boxplot</em> de onívoros, <span class="hl">os <em>outliers</em> aparecem como pontos isolados,</span> acima da caixa, além dos alcances do bigode superior (aliás, onde está bigode superior?).</p></li>
<li><p><em>Boxplots</em> lado a lado são úteis para compararmos grupos diferentes de dados.</p></li>
<li><p>Veja como, com exceção dos insetívoros, as medianas dos grupos são parecidas.</p></li>
<li><p>Veja como carnívoros, insetívoros e herbívoros apresentam maior variação, enquanto onívoros e animais sem dieta registrada apresentam menor variação.</p></li>
<li>
<p>Vamos combinar, em um só gráfico</p>
<ul>
<li><p>Os pontos representando os animais,</p></li>
<li><p>Os <em>boxplots</em>,</p></li>
<li><p>As médias (que podem estar próximas ou distantes das medianas).</p></li>
</ul>
<div class="sourceCode" id="cb368"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sono</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">vore</span>, y <span class="op">=</span> <span class="va">sleep_total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'gray'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span></span>
<span>      color <span class="op">=</span> <span class="st">'blue'</span>, </span>
<span>      alpha <span class="op">=</span> <span class="fl">.3</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span></span>
<span>      fun <span class="op">=</span> <span class="va">mean</span>, </span>
<span>      geom <span class="op">=</span> <span class="st">'point'</span>, </span>
<span>      color <span class="op">=</span> <span class="st">'red'</span>, </span>
<span>      shape <span class="op">=</span> <span class="st">'cross'</span>, </span>
<span>      size <span class="op">=</span> <span class="fl">5</span>,</span>
<span>      stroke <span class="op">=</span> <span class="fl">1</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">'Sono total de diversos mamíferos, por dieta'</span>,</span>
<span>      subtitle <span class="op">=</span> <span class="st">'(o X vermelho representa a média)'</span>,</span>
<span>      x <span class="op">=</span> <span class="st">'dieta'</span>,</span>
<span>      y <span class="op">=</span> <span class="st">'sono total\n(em horas)'</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-216-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p><span class="hl">Quando a caixa é longa,</span> o IQR é grande, e <span class="hl">os valores estão muito espalhados;</span> é o caso dos herbívoros e insetívoros.</p></li>
<li><p><span class="hl">Quando a caixa é curta,</span> o IQR é pequeno, e <span class="hl">os valores estão pouco espalhados</span>; é o caso dos onívoros. Como o IQR é pequeno, os <span class="math inline">\(4\)</span> mamíferos com mais de <span class="math inline">\(14\)</span> horas de sono são <em>outliers</em>.</p></li>
<li><p>Observe, ainda, como os <em>outliers</em> “puxam” a média dos onívoros para cima.</p></li>
</ul>
</div>
</div>
<div id="vídeo-2-2" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Vídeo 2<a class="anchor" aria-label="anchor" href="#v%C3%ADdeo-2-2"><i class="fas fa-link"></i></a>
</h2>
<iframe src="https://www.youtube.com/embed/QqnOvgBXJ-s" width="100%" height="400px" data-external="1" class="center" style="width: 80%;">
</iframe>
</div>
<div id="gráficos-de-barras-e-de-colunas" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Gráficos de barras e de colunas<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos-de-barras-e-de-colunas"><i class="fas fa-link"></i></a>
</h2>
<div id="conjunto-de-dados-1" class="section level3" number="5.4.1">
<h3>
<span class="header-section-number">5.4.1</span> Conjunto de dados<a class="anchor" aria-label="anchor" href="#conjunto-de-dados-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p>O R tem um <em>array</em> de <span class="math inline">\(3\)</span> dimensões com dados sobre as cores dos cabelos e dos olhos de <span class="math inline">\(592\)</span> alunos e alunas de uma universidade americana em <span class="math inline">\(1974\)</span>.</p></li>
<li>
<p>Se pedirmos para o R exibir os dados, veremos <span class="hl">duas matrizes</span>, uma para cada sexo:</p>
<div class="sourceCode" id="cb369"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HairEyeColor</span></span></code></pre></div>
<pre><code>## , , Sex = Male
## 
##        Eye
## Hair    Brown Blue Hazel Green
##   Black    32   11    10     3
##   Brown    53   50    25    15
##   Red      10   10     7     7
##   Blond     3   30     5     8
## 
## , , Sex = Female
## 
##        Eye
## Hair    Brown Blue Hazel Green
##   Black    36    9     5     2
##   Brown    66   34    29    14
##   Red      16    7     7     7
##   Blond     4   64     5     8</code></pre>
</li>
<li><p>Vamos transformar este <em>array</em> em um <em>data frame</em>.</p></li>
<li>
<p>O <em>array</em> contém apenas os totais de cada classe. Vamos usar a função <code>uncount</code> para gerar uma linha para cada aluno:</p>
<div class="sourceCode" id="cb371"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_orig</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">HairEyeColor</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/uncount.html">uncount</a></span><span class="op">(</span><span class="va">Freq</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_orig</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Hair"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Eye"],"name":[2],"type":["fct"],"align":["left"]},{"label":["Sex"],"name":[3],"type":["fct"],"align":["left"]}],"data":[{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Black","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Brown","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Red","2":"Brown","3":"Male"},{"1":"Blond","2":"Brown","3":"Male"},{"1":"Blond","2":"Brown","3":"Male"},{"1":"Blond","2":"Brown","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Black","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Brown","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Red","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Blond","2":"Blue","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Black","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Brown","2":"Hazel","3":"Male"},{"1":"Red","2":"Hazel","3":"Male"},{"1":"Red","2":"Hazel","3":"Male"},{"1":"Red","2":"Hazel","3":"Male"},{"1":"Red","2":"Hazel","3":"Male"},{"1":"Red","2":"Hazel","3":"Male"},{"1":"Red","2":"Hazel","3":"Male"},{"1":"Red","2":"Hazel","3":"Male"},{"1":"Blond","2":"Hazel","3":"Male"},{"1":"Blond","2":"Hazel","3":"Male"},{"1":"Blond","2":"Hazel","3":"Male"},{"1":"Blond","2":"Hazel","3":"Male"},{"1":"Blond","2":"Hazel","3":"Male"},{"1":"Black","2":"Green","3":"Male"},{"1":"Black","2":"Green","3":"Male"},{"1":"Black","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Brown","2":"Green","3":"Male"},{"1":"Red","2":"Green","3":"Male"},{"1":"Red","2":"Green","3":"Male"},{"1":"Red","2":"Green","3":"Male"},{"1":"Red","2":"Green","3":"Male"},{"1":"Red","2":"Green","3":"Male"},{"1":"Red","2":"Green","3":"Male"},{"1":"Red","2":"Green","3":"Male"},{"1":"Blond","2":"Green","3":"Male"},{"1":"Blond","2":"Green","3":"Male"},{"1":"Blond","2":"Green","3":"Male"},{"1":"Blond","2":"Green","3":"Male"},{"1":"Blond","2":"Green","3":"Male"},{"1":"Blond","2":"Green","3":"Male"},{"1":"Blond","2":"Green","3":"Male"},{"1":"Blond","2":"Green","3":"Male"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Black","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Brown","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Red","2":"Brown","3":"Female"},{"1":"Blond","2":"Brown","3":"Female"},{"1":"Blond","2":"Brown","3":"Female"},{"1":"Blond","2":"Brown","3":"Female"},{"1":"Blond","2":"Brown","3":"Female"},{"1":"Black","2":"Blue","3":"Female"},{"1":"Black","2":"Blue","3":"Female"},{"1":"Black","2":"Blue","3":"Female"},{"1":"Black","2":"Blue","3":"Female"},{"1":"Black","2":"Blue","3":"Female"},{"1":"Black","2":"Blue","3":"Female"},{"1":"Black","2":"Blue","3":"Female"},{"1":"Black","2":"Blue","3":"Female"},{"1":"Black","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Brown","2":"Blue","3":"Female"},{"1":"Red","2":"Blue","3":"Female"},{"1":"Red","2":"Blue","3":"Female"},{"1":"Red","2":"Blue","3":"Female"},{"1":"Red","2":"Blue","3":"Female"},{"1":"Red","2":"Blue","3":"Female"},{"1":"Red","2":"Blue","3":"Female"},{"1":"Red","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Blond","2":"Blue","3":"Female"},{"1":"Black","2":"Hazel","3":"Female"},{"1":"Black","2":"Hazel","3":"Female"},{"1":"Black","2":"Hazel","3":"Female"},{"1":"Black","2":"Hazel","3":"Female"},{"1":"Black","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Brown","2":"Hazel","3":"Female"},{"1":"Red","2":"Hazel","3":"Female"},{"1":"Red","2":"Hazel","3":"Female"},{"1":"Red","2":"Hazel","3":"Female"},{"1":"Red","2":"Hazel","3":"Female"},{"1":"Red","2":"Hazel","3":"Female"},{"1":"Red","2":"Hazel","3":"Female"},{"1":"Red","2":"Hazel","3":"Female"},{"1":"Blond","2":"Hazel","3":"Female"},{"1":"Blond","2":"Hazel","3":"Female"},{"1":"Blond","2":"Hazel","3":"Female"},{"1":"Blond","2":"Hazel","3":"Female"},{"1":"Blond","2":"Hazel","3":"Female"},{"1":"Black","2":"Green","3":"Female"},{"1":"Black","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Brown","2":"Green","3":"Female"},{"1":"Red","2":"Green","3":"Female"},{"1":"Red","2":"Green","3":"Female"},{"1":"Red","2":"Green","3":"Female"},{"1":"Red","2":"Green","3":"Female"},{"1":"Red","2":"Green","3":"Female"},{"1":"Red","2":"Green","3":"Female"},{"1":"Red","2":"Green","3":"Female"},{"1":"Blond","2":"Green","3":"Female"},{"1":"Blond","2":"Green","3":"Female"},{"1":"Blond","2":"Green","3":"Female"},{"1":"Blond","2":"Green","3":"Female"},{"1":"Blond","2":"Green","3":"Female"},{"1":"Blond","2":"Green","3":"Female"},{"1":"Blond","2":"Green","3":"Female"},{"1":"Blond","2":"Green","3":"Female"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</li>
<li><p>O <code>ggplot2</code> e os outros pacotes do <code>tidyverse</code> foram projetados para trabalhar com <em>data frames</em> neste formato, <span class="hl">com uma observação (um indivíduo, um elemento) por linha.</span> É o chamado <span class="hl">formato <em>tidy</em>.</span></p></li>
<li>
<p>Usando vetores com elementos nomeados, podemos traduzir o conteúdo do <em>data frame</em> para português:</p>
<div class="sourceCode" id="cb372"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cabelo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">'Brown'</span> <span class="op">=</span> <span class="st">'castanhos'</span>,</span>
<span>  <span class="st">'Blond'</span> <span class="op">=</span> <span class="st">'louros'</span>,</span>
<span>  <span class="st">'Black'</span> <span class="op">=</span> <span class="st">'pretos'</span>,</span>
<span>  <span class="st">'Red'</span> <span class="op">=</span> <span class="st">'ruivos'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">olhos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">'Brown'</span> <span class="op">=</span> <span class="st">'castanhos'</span>,</span>
<span>  <span class="st">'Blue'</span> <span class="op">=</span> <span class="st">'azuis'</span>,</span>
<span>  <span class="st">'Hazel'</span> <span class="op">=</span> <span class="st">'avelã'</span>,</span>
<span>  <span class="st">'Green'</span> <span class="op">=</span> <span class="st">'verdes'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">sexo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">'Male'</span> <span class="op">=</span> <span class="st">'homem'</span>,</span>
<span>  <span class="st">'Female'</span> <span class="op">=</span> <span class="st">'mulher'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df_orig</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html">transmute</a></span><span class="op">(</span></span>
<span>    cabelos <span class="op">=</span> <span class="va">cabelo</span><span class="op">[</span><span class="va">Hair</span><span class="op">]</span>,</span>
<span>    olhos <span class="op">=</span> <span class="va">olhos</span><span class="op">[</span><span class="va">Eye</span><span class="op">]</span>,</span>
<span>    sexo <span class="op">=</span> <span class="va">sexo</span><span class="op">[</span><span class="va">Sex</span><span class="op">]</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Um sumário:</p>
<div class="sourceCode" id="cb373"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/summarytools/man/dfSummary.html">dfSummary</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:97%;" class="table table-sm">
<colgroup>
<col width="14%">
<col width="25%">
<col width="23%">
<col width="24%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th>Variável</th>
<th>Estatísticas / Valores</th>
<th>Freqs (% de Válidos)</th>
<th>Grafo</th>
<th>Faltante</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>cabelos<br>
[character]</td>
<td>1. castanhos<br>
2. louros<br>
3. pretos<br>
4. ruivos</td>
<td>108 (18,2%)<br>
286 (48,3%)<br>
71 (12,0%)<br>
127 (21,5%)</td>
<td><img src="dfimg/ds0020.png"></td>
<td>0<br>
(0,0%)</td>
</tr>
<tr class="even">
<td>olhos<br>
[character]</td>
<td>1. avelã<br>
2. azuis<br>
3. castanhos<br>
4. verdes</td>
<td>93 (15,7%)<br>
215 (36,3%)<br>
220 (37,2%)<br>
64 (10,8%)</td>
<td><img src="dfimg/ds0021.png"></td>
<td>0<br>
(0,0%)</td>
</tr>
<tr class="odd">
<td>sexo<br>
[character]</td>
<td>1. homem<br>
2. mulher</td>
<td>279 (47,1%)<br>
313 (52,9%)</td>
<td><img src="dfimg/ds0022.png"></td>
<td>0<br>
(0,0%)</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div id="gerando-gráficos-de-barras" class="section level3" number="5.4.2">
<h3>
<span class="header-section-number">5.4.2</span> Gerando gráficos de barras<a class="anchor" aria-label="anchor" href="#gerando-gr%C3%A1ficos-de-barras"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p>Um <span class="hl">gráfico de barras</span> contém uma barra para cada valor de uma <span class="hl">variável categórica.</span></p></li>
<li>
<p><span class="hl">Usamos <code>geom_bar</code> para gerar um gráfico de barras</span> de cores de cabelo:</p>
<div class="sourceCode" id="cb374"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">cabelos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-222-1.png" width="100%" style="display: block; margin: auto;"></div>
<div class="rmdimportant">
<p><strong>Gráfico de barras <span class="math inline">\(\times\)</span> histograma:</strong></p>
<ul>
<li><p><span class="hl">Os dois tipos de gráficos mostram a frequência</span> (quantidade de elementos) <span class="hl">no eixo vertical</span>.</p></li>
<li>
<p>No <span class="hl">gráfico de barras</span>:</p>
<ul>
<li><p>A variável é <span class="hl">categórica</span> (nominal).</p></li>
<li><p><span class="hl">Cada barra</span> corresponde a <span class="hl">um valor</span> da variável.</p></li>
<li><p><span class="hl">As barras não se tocam</span>, enfatizando o fato de que a variável é categórica.</p></li>
</ul>
</li>
<li>
<p>No <span class="hl">histograma</span> (<a href="viz.html#histograma1">veja o exemplo</a>):</p>
<ul>
<li><p>A variável é <span class="hl">quantitativa</span> (intervalar ou racional).</p></li>
<li><p><span class="hl">Cada barra</span> corresponde a <span class="hl">uma classe de valores</span> da variável.</p></li>
<li><p><span class="hl">As barras se tocam</span>, para enfatizar que as classes são contíguas.</p></li>
</ul>
</li>
</ul>
</div>
</li>
<li><p>Um gráfico de barras é mais legível quando as barras são mostradas em ordem crescente ou decrescente.</p></li>
<li><p>Embora os valores da variável <code>cabelos</code> sejam <em>strings</em>, podemos aplicar a eles funções que manipulam fatores.</p></li>
<li><p>A <span class="hl">função <code>fct_infreq</code></span>, do pacote <code>forcats</code>, ordena os valores em <span class="hl">ordem decrescente de frequência</span>.</p></li>
<li>
<p>A <span class="hl">função <code>fct_rev</code></span>, também do pacote <code>forcats</code>, <span class="hl">inverte a ordenação.</span></p>
<div class="sourceCode" id="cb375"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">cabelos</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">'cabelos'</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-223-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p>A posição <span class="math inline">\(x\)</span> e a altura de cada barra são estéticas: <span class="hl">a posição <span class="math inline">\(x\)</span> representa a cor dos cabelos</span>, e <span class="hl">a altura representa a frequência daquela cor</span>.</p></li>
<li>
<p>Vamos acrescentar mais uma estética: <span class="hl">a cor de preenchimento vai representar o sexo</span>.</p>
<div class="sourceCode" id="cb376"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">cabelos</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">'cabelos'</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-224-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li>
<p>Se a cor dos homens incomoda você, altere a escala que especifica o preenchimento (<code>scale_fill_discrete</code>):</p>
<div class="sourceCode" id="cb377"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">cabelos</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'blue'</span>, <span class="st">'red'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">'cabelos'</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-225-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li>
<p><span class="hl">Podemos fazer um gráfico de barras horizontais com <code>coord_flip</code>.</span> Isto geralmente é útil quando os rótulos das barras são longos:</p>
<div class="sourceCode" id="cb378"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">cabelos</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'blue'</span>, <span class="st">'red'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">'cabelos'</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-226-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p>Você consegue dizer se há mais homens ou mulheres com cabelos pretos? E castanhos? E ruivos?</p></li>
<li><p>Se posicionarmos as barras lado a lado, fica mais fácil responder.</p></li>
<li>
<p>Usamos o argumento <code>position = 'dodge'</code> de <code>geom_bar</code>. “<em>Dodge</em>” significa “esquivar-se”, em inglês.</p>
<div class="sourceCode" id="cb379"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">cabelos</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">'dodge'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">'cabelos'</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'blue'</span>, <span class="st">'red'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-227-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li>
<p>Agora vamos examinar a relação entre as cores dos olhos e as cores dos cabelos:</p>
<div class="sourceCode" id="cb380"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">cabelos</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">olhos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'#908050'</span>, <span class="st">'blue'</span>, <span class="st">'brown'</span>, <span class="st">'green'</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">'cabelos'</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-228-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li>
<p>Ou, com barras lado a lado:</p>
<div class="sourceCode" id="cb381"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">cabelos</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">olhos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">'dodge'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'#908050'</span>, <span class="st">'blue'</span>, <span class="st">'brown'</span>, <span class="st">'green'</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">'cabelos'</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-229-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li>
<p>Observações e perguntas:</p>
<ol style="list-style-type: decimal">
<li><p>Há mais pessoas louras de olhos castanhos do que louras de olhos azuis. O esperado não seria mais pessoas louras de olhos azuis? Pessoas louras de olhos castanhos pintaram os cabelos?</p></li>
<li><p>Há muito mais ruivos de olhos azuis do que ruivos de olhos verdes. Não deveria ser o contrário? Também são pessoas que pintaram os cabelos de ruivo? Ou houve erro no registro das cores dos olhos?</p></li>
</ol>
</li>
<li>
<p>Para incluir o sexo, podemos <span class="hl">facetar</span> o gráfico. Usando <code>facet_wrap</code><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;O nome da variável segundo a qual facetar deve aparecer depois de um &lt;code&gt;~&lt;/code&gt;.&lt;/p&gt;"><sup>3</sup></a>, geramos dois subgráficos lado a lado:</p>
<div class="sourceCode" id="cb382"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">cabelos</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">olhos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">'dodge'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'#908050'</span>, <span class="st">'blue'</span>, <span class="st">'brown'</span>, <span class="st">'green'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="st">'Cores de cabelos e olhos por sexo'</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      x <span class="op">=</span> <span class="st">'cabelos'</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-230-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
</ul>
<ul>
<li><p>Se a quantidade grande de pessoas louras de olhos castanhos (em comparação com pessoas louras de olhos azuis) for por causa da pintura de cabelos, então o gráfico acima mostra que as mulheres pintam os cabelos de louro com mais frequência do que os homens.</p></li>
<li>
<p>Quando facetamos por cor de cabelos, também podemos observar as mesmas diferenças entre homens e mulheres:</p>
<div class="sourceCode" id="cb383"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span>, fill <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">olhos</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">'dodge'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">cabelos</span>, labeller <span class="op">=</span> <span class="va">label_both</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'brown'</span>, <span class="st">'blue'</span>, <span class="st">'#908050'</span>, <span class="st">'green'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      fill <span class="op">=</span> <span class="st">'olhos'</span>,</span>
<span>      title <span class="op">=</span> <span class="st">'Cor dos olhos e sexo por cor dos cabelos'</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-231-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
</ul>
</div>
<div id="data-frame-já-contendo-os-totais" class="section level3" number="5.4.3">
<h3>
<span class="header-section-number">5.4.3</span> <em>Data frame</em> já contendo os totais<a class="anchor" aria-label="anchor" href="#data-frame-j%C3%A1-contendo-os-totais"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p>Você percebeu que <span class="hl"><code>geom_bar</code> analisa o <em>data frame</em> e calcula as frequências</span> necessárias para construir o gráfico.</p></li>
<li><p>Em algumas situações, <span class="hl">o <em>data frame</em> já contém as frequências</span> (em vez de conter uma linha por indivíduo).</p></li>
<li>
<p>Vamos usar <code>count</code> para criar um <em>data frame</em> assim:</p>
<div class="sourceCode" id="cb384"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_tot</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">sexo</span>, <span class="va">cabelos</span>, <span class="va">olhos</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_tot</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["sexo"],"name":[1],"type":["chr"],"align":["left"]},{"label":["cabelos"],"name":[2],"type":["chr"],"align":["left"]},{"label":["olhos"],"name":[3],"type":["chr"],"align":["left"]},{"label":["n"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"homem","2":"castanhos","3":"avelã","4":"10"},{"1":"homem","2":"castanhos","3":"azuis","4":"11"},{"1":"homem","2":"castanhos","3":"castanhos","4":"32"},{"1":"homem","2":"castanhos","3":"verdes","4":"3"},{"1":"homem","2":"louros","3":"avelã","4":"25"},{"1":"homem","2":"louros","3":"azuis","4":"50"},{"1":"homem","2":"louros","3":"castanhos","4":"53"},{"1":"homem","2":"louros","3":"verdes","4":"15"},{"1":"homem","2":"pretos","3":"avelã","4":"7"},{"1":"homem","2":"pretos","3":"azuis","4":"10"},{"1":"homem","2":"pretos","3":"castanhos","4":"10"},{"1":"homem","2":"pretos","3":"verdes","4":"7"},{"1":"homem","2":"ruivos","3":"avelã","4":"5"},{"1":"homem","2":"ruivos","3":"azuis","4":"30"},{"1":"homem","2":"ruivos","3":"castanhos","4":"3"},{"1":"homem","2":"ruivos","3":"verdes","4":"8"},{"1":"mulher","2":"castanhos","3":"avelã","4":"5"},{"1":"mulher","2":"castanhos","3":"azuis","4":"9"},{"1":"mulher","2":"castanhos","3":"castanhos","4":"36"},{"1":"mulher","2":"castanhos","3":"verdes","4":"2"},{"1":"mulher","2":"louros","3":"avelã","4":"29"},{"1":"mulher","2":"louros","3":"azuis","4":"34"},{"1":"mulher","2":"louros","3":"castanhos","4":"66"},{"1":"mulher","2":"louros","3":"verdes","4":"14"},{"1":"mulher","2":"pretos","3":"avelã","4":"7"},{"1":"mulher","2":"pretos","3":"azuis","4":"7"},{"1":"mulher","2":"pretos","3":"castanhos","4":"16"},{"1":"mulher","2":"pretos","3":"verdes","4":"7"},{"1":"mulher","2":"ruivos","3":"avelã","4":"5"},{"1":"mulher","2":"ruivos","3":"azuis","4":"64"},{"1":"mulher","2":"ruivos","3":"castanhos","4":"4"},{"1":"mulher","2":"ruivos","3":"verdes","4":"8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</li>
<li><p>Para <span class="math inline">\(4\)</span> cores de cabelo, <span class="math inline">\(4\)</span> cores de olhos, e <span class="math inline">\(2\)</span> sexos, são <span class="math inline">\(32\)</span> combinações possíveis.</p></li>
<li>
<p>Com este <em>data frame</em>, podemos gerar todos os gráficos anteriores usando <span class="hl"><code>geom_col</code> no lugar de <code>geom_bar</code></span>. Por exemplo:</p>
<div class="sourceCode" id="cb385"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_tot</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">cabelos</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-233-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p>Com <code>geom_col</code>, <span class="hl">precisamos passar a estética <span class="math inline">\(y\)</span></span> (no nosso exemplo, a variável <code>n</code>, que contém as frequências).</p></li>
<li>
<p>Para ordenar as barras, usamos a função <code>fct_reorder</code>, que ordena os níveis de um fator (<code>cabelos</code>) de acordo com o resultado de uma função (<code>sum</code>) aplicada sobre os valores de outra variável (<code>n</code>):</p>
<div class="sourceCode" id="cb386"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_tot</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">cabelos</span>, <span class="va">n</span>, <span class="va">sum</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">'cabelos'</span>,</span>
<span>      y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-234-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
</ul>
</div>
</div>
<div id="gráficos-de-linha-e-séries-temporais" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> Gráficos de linha e séries temporais<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos-de-linha-e-s%C3%A9ries-temporais"><i class="fas fa-link"></i></a>
</h2>
<div id="conjunto-de-dados-2" class="section level3" number="5.5.1">
<h3>
<span class="header-section-number">5.5.1</span> Conjunto de dados<a class="anchor" aria-label="anchor" href="#conjunto-de-dados-2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<p>O R tem uma matriz com as quantidades de telefones em várias regiões do mundo ao longo de vários anos:</p>
<div class="sourceCode" id="cb387"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">WorldPhones</span></span></code></pre></div>
<pre><code>##      N.Amer Europe Asia S.Amer Oceania Africa Mid.Amer
## 1951  45939  21574 2876   1815    1646     89      555
## 1956  60423  29990 4708   2568    2366   1411      733
## 1957  64721  32510 5230   2695    2526   1546      773
## 1958  68484  35218 6662   2845    2691   1663      836
## 1959  71799  37598 6856   3000    2868   1769      911
## 1960  76036  40341 8220   3145    3054   1905     1008
## 1961  79831  43173 9053   3338    3224   2005     1076</code></pre>
</li>
<li><p>Os números representam milhares.</p></li>
<li><p><span class="hl">Os números dos anos são os nomes das linhas da matriz.</span></p></li>
<li>
<p>Vamos transformar esta matriz em uma <em>tibble</em>:</p>
<div class="sourceCode" id="cb389"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fones</span> <span class="op">&lt;-</span> <span class="va">WorldPhones</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span>rownames <span class="op">=</span> <span class="st">'Ano'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Ano <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">Ano</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fones</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Ano"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["N.Amer"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Europe"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Asia"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["S.Amer"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Oceania"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Africa"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Mid.Amer"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"1951","2":"45939","3":"21574","4":"2876","5":"1815","6":"1646","7":"89","8":"555"},{"1":"1956","2":"60423","3":"29990","4":"4708","5":"2568","6":"2366","7":"1411","8":"733"},{"1":"1957","2":"64721","3":"32510","4":"5230","5":"2695","6":"2526","7":"1546","8":"773"},{"1":"1958","2":"68484","3":"35218","4":"6662","5":"2845","6":"2691","7":"1663","8":"836"},{"1":"1959","2":"71799","3":"37598","4":"6856","5":"3000","6":"2868","7":"1769","8":"911"},{"1":"1960","2":"76036","3":"40341","4":"8220","5":"3145","6":"3054","7":"1905","8":"1008"},{"1":"1961","2":"79831","3":"43173","4":"9053","5":"3338","6":"3224","7":"2005","8":"1076"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</li>
<li>
<p>Esta <em>tibble</em> <span class="hl">não está no formato <em>tidy</em></span>. Queremos que cada linha corresponda a uma observação, contendo</p>
<ul>
<li><p>Ano,</p></li>
<li><p>Região,</p></li>
<li><p>Quantidade de telefones.</p></li>
</ul>
</li>
<li>
<p>Usamos a função <code>pivot_longer</code> para mudar o formato da <em>tibble</em>:</p>
<div class="sourceCode" id="cb390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fones_long</span> <span class="op">&lt;-</span> <span class="va">fones</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="op">-</span><span class="va">Ano</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">'Região'</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">'n'</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">fones_long</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Ano"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Região"],"name":[2],"type":["chr"],"align":["left"]},{"label":["n"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"1951","2":"N.Amer","3":"45939"},{"1":"1951","2":"Europe","3":"21574"},{"1":"1951","2":"Asia","3":"2876"},{"1":"1951","2":"S.Amer","3":"1815"},{"1":"1951","2":"Oceania","3":"1646"},{"1":"1951","2":"Africa","3":"89"},{"1":"1951","2":"Mid.Amer","3":"555"},{"1":"1956","2":"N.Amer","3":"60423"},{"1":"1956","2":"Europe","3":"29990"},{"1":"1956","2":"Asia","3":"4708"},{"1":"1956","2":"S.Amer","3":"2568"},{"1":"1956","2":"Oceania","3":"2366"},{"1":"1956","2":"Africa","3":"1411"},{"1":"1956","2":"Mid.Amer","3":"733"},{"1":"1957","2":"N.Amer","3":"64721"},{"1":"1957","2":"Europe","3":"32510"},{"1":"1957","2":"Asia","3":"5230"},{"1":"1957","2":"S.Amer","3":"2695"},{"1":"1957","2":"Oceania","3":"2526"},{"1":"1957","2":"Africa","3":"1546"},{"1":"1957","2":"Mid.Amer","3":"773"},{"1":"1958","2":"N.Amer","3":"68484"},{"1":"1958","2":"Europe","3":"35218"},{"1":"1958","2":"Asia","3":"6662"},{"1":"1958","2":"S.Amer","3":"2845"},{"1":"1958","2":"Oceania","3":"2691"},{"1":"1958","2":"Africa","3":"1663"},{"1":"1958","2":"Mid.Amer","3":"836"},{"1":"1959","2":"N.Amer","3":"71799"},{"1":"1959","2":"Europe","3":"37598"},{"1":"1959","2":"Asia","3":"6856"},{"1":"1959","2":"S.Amer","3":"3000"},{"1":"1959","2":"Oceania","3":"2868"},{"1":"1959","2":"Africa","3":"1769"},{"1":"1959","2":"Mid.Amer","3":"911"},{"1":"1960","2":"N.Amer","3":"76036"},{"1":"1960","2":"Europe","3":"40341"},{"1":"1960","2":"Asia","3":"8220"},{"1":"1960","2":"S.Amer","3":"3145"},{"1":"1960","2":"Oceania","3":"3054"},{"1":"1960","2":"Africa","3":"1905"},{"1":"1960","2":"Mid.Amer","3":"1008"},{"1":"1961","2":"N.Amer","3":"79831"},{"1":"1961","2":"Europe","3":"43173"},{"1":"1961","2":"Asia","3":"9053"},{"1":"1961","2":"S.Amer","3":"3338"},{"1":"1961","2":"Oceania","3":"3224"},{"1":"1961","2":"Africa","3":"2005"},{"1":"1961","2":"Mid.Amer","3":"1076"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</li>
<li><p>Confira: antes, tínhamos <span class="math inline">\(7\)</span> anos, com <span class="math inline">\(7\)</span> quantidades por ano, uma quantidade por região. Eram <span class="math inline">\(49\)</span> quantidades. Agora temos uma <em>tibble</em> de <span class="math inline">\(49\)</span> linhas.</p></li>
</ul>
</div>
<div id="gerando-gráficos-de-linha" class="section level3" number="5.5.2">
<h3>
<span class="header-section-number">5.5.2</span> Gerando gráficos de linha<a class="anchor" aria-label="anchor" href="#gerando-gr%C3%A1ficos-de-linha"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<p><span class="hl">A geometria <code>geom_line</code> gera gráficos de linha.</span> Perceba como geramos uma linha por região:</p>
<div class="sourceCode" id="cb391"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fones_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ano</span>, y <span class="op">=</span> <span class="va">n</span>, color <span class="op">=</span> <span class="va">Região</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fl">1951</span><span class="op">:</span><span class="fl">1961</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-238-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li>
<p>Embora a legenda associe uma cor a cada região, <span class="hl">a leitura seria mais fácil se a ordem das regiões na legenda coincidisse com a posição das linhas na borda direita da grade</span>:</p>
<div class="sourceCode" id="cb392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fones_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="va">Ano</span>, </span>
<span>        y <span class="op">=</span> <span class="va">n</span>, </span>
<span>        color <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">Região</span>, <span class="va">n</span>, <span class="va">max</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fl">1951</span><span class="op">:</span><span class="fl">1961</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      color <span class="op">=</span> <span class="st">'Região'</span>,</span>
<span>      y <span class="op">=</span> <span class="st">''</span>,</span>
<span>      x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      title <span class="op">=</span> <span class="st">'Quantidade de aparelhos de telefone por ano, por região'</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-239-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li>
<p>Parece que está faltando uma linha, mas o que acontece é que as quantidades da América do Sul e da Oceania são bem parecidas:</p>
<div class="sourceCode" id="cb393"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fones_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Região</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'S.Amer'</span>, <span class="st">'Oceania'</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">Ano</span>, </span>
<span>      y <span class="op">=</span> <span class="va">n</span>, </span>
<span>      color <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">Região</span>, <span class="va">n</span>, <span class="va">max</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fl">1951</span><span class="op">:</span><span class="fl">1961</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="cn">NULL</span>, color <span class="op">=</span> <span class="st">'Região'</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-240-1.png" width="100%" style="display: block; margin: auto;"></div>
</li>
<li><p>Estamos tratando estes dados como simples números, mas, na verdade, <span class="hl">este conjunto de dados é uma série temporal (<em>time series</em>)</span>.</p></li>
<li><p>R tem todo um conjunto de funções para tratar séries temporais, calcular tendências, achar padrões cíclicos, fazer estimativas, e gerar gráficos específicos, entre outras coisas.</p></li>
<li><p>Mas não vamos falar mais sobre séries temporais aqui.</p></li>
<li>
<p>O <span class="hl">pacote <code>tsibble</code></span> oferece maneiras de trabalhar com séries temporais de maneira <em>tidy</em>. Você pode ler a documentação do pacote entrando</p>
<div class="sourceCode" id="cb394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tsibble.tidyverts.org">tsibble</a></span><span class="op">)</span></span>
<span><span class="op">?</span><span class="va">`tsibble-package`</span></span></code></pre></div>
</li>
</ul>
</div>
</div>
<div id="exercícios-6" class="section level2" number="5.6">
<h2>
<span class="header-section-number">5.6</span> Exercícios<a class="anchor" aria-label="anchor" href="#exerc%C3%ADcios-6"><i class="fas fa-link"></i></a>
</h2>
<div id="o-bigode-dos-onívoros" class="section level3" number="5.6.1">
<h3>
<span class="header-section-number">5.6.1</span> O bigode dos onívoros<a class="anchor" aria-label="anchor" href="#o-bigode-dos-on%C3%ADvoros"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Examine o <em>data frame</em> <code>sono</code> para descobrir o que houve com o bigode superior do <em>boxplot</em> dos onívoros <a href="viz2.html#onivoros">neste gráfico</a>.</li>
</ul>
</div>
<div id="usando-geom_col" class="section level3" number="5.6.2">
<h3>
<span class="header-section-number">5.6.2</span> Usando <code>geom_col</code><a class="anchor" aria-label="anchor" href="#usando-geom_col"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Use <code>geom_col</code> para reproduzir, a partir do <em>data frame</em> <code>df_tot</code>, todos os gráficos que foram gerados com <code>geom_bar</code> na seção <a href="#gerando-gr%C3%A1ficos-de-barras">Gerando gráficos de barras</a>.</li>
</ul>
</div>
</div>
<div id="referências-sobre-visualização-e-r" class="section level2" number="5.7">
<h2>
<span class="header-section-number">5.7</span> Referências sobre visualização e R<a class="anchor" aria-label="anchor" href="#refer%C3%AAncias-sobre-visualiza%C3%A7%C3%A3o-e-r"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdtip">
<p>Busque mais informações sobre os pacotes <code>tidyverse</code> e <code>ggplot2</code> <a href="index.html#refrec">nas referências recomendadas</a>.</p>
</div>

</div>
</div>

<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

init_exercises = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

$(init_exercises)

</script><div class="chapter-nav">
<div class="prev"><a href="viz.html"><span class="header-section-number">4</span> Visualização com ggplot2</a></div>
<div class="next"><a href="medidas.html"><span class="header-section-number">6</span> Medidas</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="Nesta página"><h2>Nesta página</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#viz2"><span class="header-section-number">5</span> Visualização com ggplot2 (continuação)</a></li>
<li><a class="nav-link" href="#v%C3%ADdeo-1-3"><span class="header-section-number">5.1</span> Vídeo 1</a></li>
<li>
<a class="nav-link" href="#boxplots"><span class="header-section-number">5.2</span> Boxplots</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#conjunto-de-dados"><span class="header-section-number">5.2.1</span> Conjunto de dados</a></li>
<li><a class="nav-link" href="#mediana"><span class="header-section-number">5.2.2</span> Mediana e quartis</a></li>
<li><a class="nav-link" href="#m%C3%A9dia-times-mediana"><span class="header-section-number">5.2.3</span> Média \(\times\) mediana</a></li>
<li><a class="nav-link" href="#intervalo-interquartil-iqr-e-outliers"><span class="header-section-number">5.2.4</span> Intervalo interquartil (IQR) e outliers</a></li>
<li><a class="nav-link" href="#gerando-boxplots"><span class="header-section-number">5.2.5</span> Gerando boxplots</a></li>
</ul>
</li>
<li><a class="nav-link" href="#v%C3%ADdeo-2-2"><span class="header-section-number">5.3</span> Vídeo 2</a></li>
<li>
<a class="nav-link" href="#gr%C3%A1ficos-de-barras-e-de-colunas"><span class="header-section-number">5.4</span> Gráficos de barras e de colunas</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#conjunto-de-dados-1"><span class="header-section-number">5.4.1</span> Conjunto de dados</a></li>
<li><a class="nav-link" href="#gerando-gr%C3%A1ficos-de-barras"><span class="header-section-number">5.4.2</span> Gerando gráficos de barras</a></li>
<li><a class="nav-link" href="#data-frame-j%C3%A1-contendo-os-totais"><span class="header-section-number">5.4.3</span> Data frame já contendo os totais</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#gr%C3%A1ficos-de-linha-e-s%C3%A9ries-temporais"><span class="header-section-number">5.5</span> Gráficos de linha e séries temporais</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#conjunto-de-dados-2"><span class="header-section-number">5.5.1</span> Conjunto de dados</a></li>
<li><a class="nav-link" href="#gerando-gr%C3%A1ficos-de-linha"><span class="header-section-number">5.5.2</span> Gerando gráficos de linha</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#exerc%C3%ADcios-6"><span class="header-section-number">5.6</span> Exercícios</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#o-bigode-dos-on%C3%ADvoros"><span class="header-section-number">5.6.1</span> O bigode dos onívoros</a></li>
<li><a class="nav-link" href="#usando-geom_col"><span class="header-section-number">5.6.2</span> Usando geom_col</a></li>
</ul>
</li>
<li><a class="nav-link" href="#refer%C3%AAncias-sobre-visualiza%C3%A7%C3%A3o-e-r"><span class="header-section-number">5.7</span> Referências sobre visualização e R</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/fnaufel/probestr/blob/master/viz-02.Rmd">Ver código-fonte <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/fnaufel/probestr/edit/master/viz-02.Rmd">Editar esta página <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Probabilidade e Estatística com R</strong>" por Fernando Náufel (versão de 22/11/2023)</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>Criado com o <a class="text-light" href="https://bookdown.org">pacote bookdown</a> do R.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
